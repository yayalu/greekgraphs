{"version":3,"sources":["images/legend.png","images/help.png","Header.tsx","Search.tsx","DataCardHandler.ts","EntityGraph.jsx","DataCards.tsx","App.tsx","serviceWorker.ts","index.tsx","images/autochthony.png","images/arrow.svg","images/logo.svg"],"names":["module","exports","Header","src","require","alt","style","width","Search","props","pageRedirect","state","redirect","to","targetID","handleSearch","bind","handleSearchKeyDown","getDescriptors","id","this","hasKey","entities","alternatives","ReactGA","event","category","action","currentInput","document","getElementById","value","split","currentInputName","trim","setState","which","keyCode","obj","key","Fragment","margin","textAlign","placeholder","list","onKeyDown","fontSize","maxHeight","Object","values","map","entity","arrow","onClick","className","React","Component","getGender","checkNoRelations","relationships","MOTHERS","length","FATHERS","SIBLINGS","TWIN","SPOUSES","CHILDREN","getNameString","parameter","stringSoFar","s","getName","entityRow","possibleNames","i","undefined","EntityGraph","getRandomPoints","edge","allShapes","forEach","shape","push","attrs","x","y","getDepthNodes","entityData","depthNegOne","depthZero","depthPosOne","m","f","CREATORS","c","BORNFROM","b","unusual","autochthony","tf","parthenogenesis","bornFromObject","createdByAgent","createdWithoutParents","diesWithoutChildren","t","d","child","checkForDuplicates","otherParentIDs","p","splice","Math","ceil","arr","e","includes","getConnectionsList","allConnections","connection","parents","children","pNodeDepth","concat","cp","isSpouseRepeated","geAllLinePoints","depthNodes","connections","console","log","allLinePoints","graphAttr","nodeWidth","height","nodeHeight","initX","spaceX","linePoints","PM_Y","PM_X","depth","NegOneY","ZeroY","pX","indexOf","pIndex","pY","CM_Y","PosOneY","cIndex","cY","name","toString","type","passage","contested","passageLinks","contestedParents","uncontestedParents","parthenogenessis","cRelationships","JSON","parse","points","sID","repeated","pID","handleMouseOverNode","body","cursor","target","strokeWidth","handleMouseOutNode","handlePageChange","relationshipClicked","handleMouseOverLine","opacity","nodeWithID","stageRef","find","stroke","sumX","numExistingContestNodes","padding","pAttrs","ORText","Konva","Text","text","fontStyle","fill","align","add","handleMouseOutLine","remove","handleClickedLine","openInfoPage","showContestPage","contest","showUnusualPage","handleClickedIcons","connectedShapes","lineLinks","getPassageLink","refs","stage","getStage","each","connectionsList","startID","author","passages","Author","title","Title","start","Passage","end","endID","URN","URNsplit","rel","href","color","AutochthonyIcon","useImage","image","marginBottom","maxWidth","border","boxShadow","background","fontWeight","ref","fontFamily","onMouseOver","onMouseOut","DataCards","members","sub","super","validSearch","agentID","objectID","alternativeName","handleNameClicked","history","grandparents","g","duplicate","duplicateIndex","j","newPassages","removeGrandparentDuplicates","clear","textTransform","float","paddingRight","marginTop","textDecoration","relationship","Pluralize","singular","showPassage","firstElement","getPluralization","entityNameAndPassage","objectNameAndPassage","getChildParentGrouped","getOtherParentText","group","member","relation","otherParents","divineParents","params","queryString","location","search","slice","newState","display","getAlternativeNames","getAlternativePage","getGrandparentDataPoints","getCollectiveSubheading","keys","getDataPoints","getCollectiveMembers","App","subjectID","show","ID","initialize","pageview","toggleModalState","paddingTop","path","component","Boolean","window","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2ba4cef8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/legend.234d904c.png\";","module.exports = \"data:image/png;base64,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\"","import React from \"react\";\nimport \"./App.css\";\n\nconst Header: React.FC = () => {\n  return (\n    <img\n      src={require(\"./images/logo.svg\")}\n      alt=\"Manto logo\"\n      style={{ width: \"20%\" }}\n    ></img>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\nimport \"./App.css\";\nimport entities from \"./data/entities.json\";\nimport { Redirect } from \"react-router-dom\";\nimport arrow from \"./images/arrow.svg\";\nimport ReactGA from \"react-ga\";\n\ntype SearchProps = {};\ntype SearchState = {\n  redirect: boolean;\n  targetID: string;\n};\n\nclass Search extends React.Component<SearchProps, SearchState> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      redirect: false,\n      targetID: \"\"\n    };\n    // this.onSearchSubmit = this.onSearchSubmit.bind(this);\n    this.handleSearch = this.handleSearch.bind(this);\n    this.handleSearchKeyDown = this.handleSearchKeyDown.bind(this);\n    this.getDescriptors = this.getDescriptors.bind(this);\n  }\n\n  getDescriptors(id: string) {\n    if (this.hasKey(entities, id)) {\n      let alternatives: string = \"\";\n      if (entities[id][\"Name (transliteration)\"] !== \"\") {\n        alternatives =\n          alternatives + \", \" + entities[id][\"Name (transliteration)\"];\n      }\n      if (entities[id][\"Name (Greek font)\"] !== \"\") {\n        alternatives = alternatives + \", \" + entities[id][\"Name (Greek font)\"];\n      }\n      if (entities[id][\"Name (Latinized)\"] !== \"\") {\n        alternatives = alternatives + \", \" + entities[id][\"Name (Latinized)\"];\n      }\n      if (entities[id][\"Name in Latin texts\"] !== \"\") {\n        alternatives =\n          alternatives + \", \" + entities[id][\"Name in Latin texts\"];\n      }\n      if (entities[id][\"Alternative names\"] !== \"\") {\n        alternatives = alternatives + \", \" + entities[id][\"Alternative names\"];\n      }\n      let inputText =\n        entities[id][\"Name (house style)\"] +\n        alternatives +\n        \": \" +\n        entities[id][\"Identifying information\"];\n      return inputText;\n    }\n  }\n\n  pageRedirect = () => {\n    if (this.state.redirect) {\n      return <Redirect to={\"/datacards?id=\" + this.state.targetID} />;\n    }\n  };\n\n  handleSearch() {\n    ReactGA.event({\n      category: \"Search\",\n      action: \"User searched for an entity using the search bar\"\n    });\n    let currentInput = document.getElementById(\"input\") as HTMLInputElement;\n    if (currentInput.value !== \"\") {\n      //Search based on name and identifying information - super inefficient. TODO: fix this\n      for (let id in entities) {\n        if (this.hasKey(entities, id)) {\n          if (\n            entities[id][\"Identifying information\"] ===\n            currentInput.value.split(\": \")[1]\n          ) {\n            let currentInputName = currentInput.value\n              .split(\": \")[0]\n              .split(\",\")[0]\n              .trim();\n\n            if (\n              currentInputName === entities[id][\"Name (house style)\"] ||\n              currentInputName === entities[id][\"Name (transliteration)\"] ||\n              currentInputName === entities[id][\"Name (Greek font)\"] ||\n              currentInputName === entities[id][\"Name (Latinized)\"] ||\n              currentInputName === entities[id][\"Name in Latin texts\"] ||\n              currentInputName === entities[id][\"Alternative names\"]\n            ) {\n              this.setState({\n                redirect: true,\n                targetID: id\n              });\n            }\n          }\n        }\n      }\n    }\n  }\n\n  handleSearchKeyDown(event: any) {\n    if (event.which === 13 || event.keyCode === 13) {\n      this.handleSearch();\n    }\n  }\n\n  /* Addresses typescript indexing objects error */\n  hasKey<O>(obj: O, key: keyof any): key is keyof O {\n    return key in obj;\n  }\n\n  render() {\n    /* const entitiesArray = Object.values(entities).map(entity => {\n      return {\n        // what to show to the user\n        label: entity.ID + \": \" + this.getDescriptors(entity.ID),\n        // key to identify the item within the array\n        key: entity.ID\n      };\n    }); */\n    return (\n      <React.Fragment>\n        {/* <h3 style={{ textAlign: \"center\" }}>SEARCH</h3> */}\n        {this.pageRedirect()}\n        <div\n          style={{\n            margin: \"1rem 0 1rem 0\",\n            textAlign: \"center\"\n          }}\n        >\n          {/* <DataListInput\n          placeholder={\"Search by entity name...\"}\n          items={entitiesArray}\n          onSelect={this.pageRedirect}\n          match={this.matchCurrentInput}\n        /> */}\n          <input\n            // type=\"search\"\n            placeholder=\"Search by name\"\n            id=\"input\"\n            list=\"entities\"\n            onKeyDown={this.handleSearchKeyDown}\n            style={{ width: \"50%\", textAlign: \"center\", fontSize: \"1rem\" }}\n          ></input>\n          <datalist id=\"entities\" style={{ maxHeight: \"100px\" }}>\n            {Object.values(entities).map(entity => {\n              return (\n                <option value={this.getDescriptors(entity[\"ID\"])}></option>\n              );\n            })}\n          </datalist>\n          <div>\n            <img\n              alt=\"Submit search\"\n              src={arrow}\n              onClick={this.handleSearch}\n              className=\"search-arrow\"\n            ></img>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Search;\n","var ties = require(\"./data/ties.json\");\nvar entities = require(\"./data/entities.json\");\nvar objects = require(\"./data/objects.json\");\nvar relationships = require(\"./data/relationships.json\");\n\ntype passageInfo = {\n  start: string;\n  startID: string;\n  end: string;\n  endID: string;\n};\n\nexport type entityInfo = {\n  target: string;\n  targetID: string;\n  passage: passageInfo[];\n  type: string;\n};\n\ntype childrenInfo = {\n  child: entityInfo[];\n  otherParentIDs: string[];\n  divineParentID?: string;\n};\n\nexport type relationshipInfo = {\n  MOTHERS: entityInfo[];\n  FATHERS: entityInfo[];\n  CREATORS: entityInfo[];\n  BORNFROM: entityInfo[];\n  SIBLINGS: entityInfo[];\n  TWIN: entityInfo[];\n  SPOUSES: entityInfo[];\n  CHILDREN: childrenInfo[];\n};\n\ntype returningInfo = {\n  id: string;\n  relationships: relationshipInfo;\n  name: string;\n  members: { sub: any[]; super: any[] };\n  type: string;\n  validSearch: boolean;\n  unusual: {\n    autochthony: { tf: boolean; passage: passageInfo[] };\n    createdWithoutParents: { tf: boolean; passage: passageInfo[] };\n    createdByAgent: { tf: boolean; passage: passageInfo[]; agentID: string };\n    parthenogenesis: { tf: boolean; passage: passageInfo[] };\n    bornFromObject: { tf: boolean; passage: passageInfo[]; objectID: string };\n    diesWithoutChildren: { tf: boolean; passage: passageInfo[] };\n  };\n  alternativeName: { targetID: string; passage: passageInfo[] };\n};\n\nlet familyTies = [\n  /* Parent */\n  \"is father of\",\n  \"is mother of\",\n  \"is parent of\",\n  /* Child */\n  \"is child of\",\n  /* Sibling */\n  \"is sibling of\",\n  \"is twin of\",\n  \"is older than\",\n  /* Spouse */\n  \"is spouse of\",\n  \"marries\",\n  /* Ancestors - currently unused\n  \"is grandfather of\",\n  \"is grandmother of\",\n  \"is grandparent of\",\n  \"is grandson of\",\n  \"is granddaughter of\",\n  \"is grandchild of\",\n  */\n\n  /* Member of collective */\n  \"is part of\",\n  \"is member of\",\n\n  /* Unusual relationships */\n  \"is born by autochthony [in/on/at]\",\n  \"comes into being\",\n  \"creates [agent]\",\n  \"is mother by parthenogenesis of\",\n  \"is born from [object]\",\n  \"has no children\"\n];\n\n/******************************************************************************************/\n/* Returns the data card geneology information, interfaces with DataCards.tsx                \n/******************************************************************************************/\nexport const updateComponent = (id: string) => {\n  let connections = getAllConnections(id);\n  if (\n    connections.length > 0 &&\n    connections[0].predicate === \"is alternative name for\"\n  ) {\n    let empty: relationshipInfo = {\n      MOTHERS: [],\n      FATHERS: [],\n      CREATORS: [],\n      BORNFROM: [],\n      SIBLINGS: [],\n      TWIN: [],\n      SPOUSES: [],\n      CHILDREN: []\n    };\n    let altNameConnection: returningInfo = {\n      id: id,\n      relationships: empty,\n      name: getName(entities[id]),\n      members: { sub: [], super: [] },\n      type: entities[id] ? entities[id][\"Type of entity\"] : \"\",\n      validSearch: true,\n      alternativeName: {\n        targetID: connections[0].targetID,\n        passage: connections[0].passage\n      },\n      unusual: {\n        autochthony: { tf: false, passage: [] },\n        createdWithoutParents: { tf: false, passage: [] },\n        createdByAgent: { tf: false, passage: [], agentID: \"\" },\n        parthenogenesis: { tf: false, passage: [] },\n        bornFromObject: { tf: false, passage: [], objectID: \"\" },\n        diesWithoutChildren: { tf: false, passage: [] }\n      }\n    };\n    return altNameConnection;\n  } else {\n    return sortConnectionsIntoRelationships(id, connections);\n  }\n};\n\n/******************************************************************************************/\n/* Find all relationships                                                                 */\n/* -------------------------------------------------------------------------------------- */\n/* This function changes all ties (X <predicate> Y, Y <predicate> X, Z <predicate> Y X) to Y <predicate> X. */\n/******************************************************************************************/\nconst getAllConnections = (id: string) => {\n  var connections: {\n    target: string;\n    targetID: string;\n    predicate: string;\n    passage: passageInfo[];\n  }[] = [];\n\n  Object.values(ties).forEach(function(tieRow) {\n    // TODO: Fix this temporary solution for entities not existing in entities.csv\n    if (typeof tieRow !== \"object\" || tieRow === null) {\n    } else {\n      // The first if statement is to remove \"object is of type unknown\" error\n\n      if (entities[tieRow[\"Subject ID\"]]) {\n        //check if the entity is just an \"alternative name for\"\n        //if so, ignore all geneological data gathered so far and just return connections = [{target: \"\", targetID: \"\", predicate: \"is alternative name for\", passage:[]}]\n\n        if (\n          tieRow[\"Subject ID\"] === id &&\n          tieRow[\"Predicate\"] === \"is alternative name for\"\n        ) {\n          let passageInfo: passageInfo[] = [\n            {\n              start: tieRow[\"Passage: start\"],\n              startID: tieRow[\"Passage: start ID\"],\n              end: tieRow[\"Passage: end\"] === \"\" ? \"\" : tieRow[\"Passage: end\"],\n              endID:\n                tieRow[\"Passage: end ID\"] === \"\"\n                  ? \"\"\n                  : tieRow[\"Passage: end ID\"]\n            }\n          ];\n          connections = [\n            {\n              target: \"\",\n              targetID: tieRow[\"Direct Object ID\"],\n              predicate: \"is alternative name for\",\n              passage: passageInfo\n            }\n          ];\n          return connections;\n        }\n\n        /*********************************************************/\n        /* If you are the direct object X, e.g. (Y (predicate) X)     */\n        /*********************************************************/\n        if (\n          tieRow[\"Direct Object ID\"] === id &&\n          familyTies.includes(tieRow[\"Predicate\"])\n        ) {\n          // For mother not including parthenogenesis part\n          let passageInfo: passageInfo[] = [\n            {\n              start: tieRow[\"Passage: start\"],\n              startID: tieRow[\"Passage: start ID\"],\n              end: tieRow[\"Passage: end\"] === \"\" ? \"\" : tieRow[\"Passage: end\"],\n              endID:\n                tieRow[\"Passage: end ID\"] === \"\"\n                  ? \"\"\n                  : tieRow[\"Passage: end ID\"]\n            }\n          ];\n\n          if (\n            getGender(tieRow[\"Subject ID\"]) &&\n            tieRow[\"Predicate\"] === \"marries\"\n          ) {\n            tieRow[\"Predicate\"] = \"is spouse of\";\n          }\n\n          if (\n            tieRow[\"Predicate\"] === \"is part of\" ||\n            tieRow[\"Predicate\"] === \"is member of\"\n          ) {\n            tieRow[\"Predicate\"] = \"has members\";\n          }\n\n          // Unusual relationships X is mother by parthenogenesis of Y, and X creates Y are dealt with here.\n\n          // Push connections to the list of connections\n          connections.push({\n            target: getName(entities[tieRow[\"Subject ID\"]]),\n            targetID: tieRow[\"Subject ID\"],\n            predicate: tieRow[\"Predicate\"],\n            passage: passageInfo\n          });\n        }\n\n        /*********************************************************/\n        /* If you are the subject X, e.g. (X (predicate) Y)           */\n        /*********************************************************/\n        if (\n          tieRow[\"Subject ID\"] === id &&\n          familyTies.includes(tieRow[\"Predicate\"])\n        ) {\n          let passageInfo: passageInfo[] = [\n            {\n              start: tieRow[\"Passage: start\"],\n              startID: tieRow[\"Passage: start ID\"],\n              end: tieRow[\"Passage: end\"] === \"\" ? \"\" : tieRow[\"Passage: end\"],\n              endID: tieRow[\"Passage: end ID\"]\n            }\n          ];\n\n          // Push connections to the list of connections\n          if (\n            tieRow[\"Predicate\"] === \"is born by autochthony [in/on/at]\" ||\n            tieRow[\"Predicate\"] === \"comes into being\" ||\n            tieRow[\"Predicate\"] === \"has no children\"\n          ) {\n            connections.push({\n              target: \"\",\n              targetID: \"\",\n              predicate: tieRow[\"Predicate\"],\n              passage: passageInfo\n            });\n          } else if (tieRow[\"Predicate\"] === \"is born from [object]\") {\n            connections.push({\n              target: getName(objects[tieRow[\"Direct Object ID\"]]),\n              targetID: tieRow[\"Direct Object ID\"],\n              predicate: tieRow[\"Predicate\"],\n              passage: passageInfo\n            });\n          } else {\n            // If collective member\n            connections.push({\n              target: getName(entities[tieRow[\"Direct Object ID\"]]),\n              targetID: tieRow[\"Direct Object ID\"],\n              predicate:\n                tieRow[\"Predicate\"] === \"is part of\" ||\n                tieRow[\"Predicate\"] === \"is member of\"\n                  ? \"is member of\"\n                  : reversedPredicate(\n                      tieRow[\"Predicate\"],\n                      tieRow[\"Direct Object ID\"]\n                    ),\n              passage: passageInfo\n            });\n          }\n        }\n\n        /***********************************************************************/\n        /* For \"Gives in marriage:\" - parent gives child in marriage to person */\n        /*************************************************************************/\n\n        // If you are the indirect object X, e.g. (Z (predicate) Y X)\n        if (\n          tieRow[\"Indirect Object (to/for) ID\"] &&\n          tieRow[\"Indirect Object (to/for) ID\"] === id &&\n          tieRow[\"Predicate\"] === \"gives in marriage [dir. obj.] [ind. obj.]\"\n        ) {\n          let passageInfo: passageInfo[] = [\n            {\n              start: tieRow[\"Passage: start\"],\n              startID: tieRow[\"Passage: start ID\"],\n              end: tieRow[\"Passage: end\"] === \"\" ? \"\" : tieRow[\"Passage: end\"],\n              endID: tieRow[\"Passage: end ID\"]\n            }\n          ];\n          connections.push({\n            target: getName(entities[tieRow[\"Direct Object ID\"]]),\n            targetID: tieRow[\"Direct Object ID\"],\n            predicate: \"is spouse of\",\n            passage: passageInfo\n          });\n        }\n\n        // If you are the direct object X, e.g. (Z (predicate) X Y)\n        else if (\n          tieRow[\"Direct Object ID\"] &&\n          tieRow[\"Direct Object ID\"] === id &&\n          tieRow[\"Predicate\"] === \"gives in marriage [dir. obj.] [ind. obj.]\"\n        ) {\n          let passageInfo: passageInfo[] = [\n            {\n              start: tieRow[\"Passage: start\"],\n              startID: tieRow[\"Passage: start ID\"],\n              end: tieRow[\"Passage: end\"] === \"\" ? \"\" : tieRow[\"Passage: end\"],\n              endID: tieRow[\"Passage: end ID\"]\n            }\n          ];\n          connections.push({\n            target: getName(entities[tieRow[\"Indirect Object (to/for) ID\"]]),\n            targetID: tieRow[\"Indirect Object (to/for) ID\"],\n            predicate: \"is spouse of\",\n            passage: passageInfo\n          });\n        }\n      }\n    }\n  });\n\n  return connections;\n};\n\n/******************************************************************************************/\n/* Sort relationships                                                                     */\n/* -------------------------------------------------------------------------------------- */\n/* This function sorts all of the found connections into existing geneological categories */\n/******************************************************************************************/\nconst sortConnectionsIntoRelationships = (id: string, connections: any) => {\n  /* Preliminary info about the entity */\n  let name = getName(entities[id]);\n  let type = entities[id] ? entities[id][\"Type of entity\"] : \"\";\n  let members: { sub: any[]; super: any[] } = { sub: [], super: [] };\n  let relationships: relationshipInfo = {\n    MOTHERS: [],\n    FATHERS: [],\n    CREATORS: [],\n    BORNFROM: [],\n    SIBLINGS: [],\n    TWIN: [],\n    SPOUSES: [],\n    CHILDREN: []\n  };\n  let Oautochthony = { tf: false, passage: [] };\n  let OcreatedWithoutParents = { tf: false, passage: [] };\n  let OcreatedByAgent = { tf: false, passage: [], agentID: \"\" };\n  let Oparthenogenesis = { tf: false, passage: [] };\n  let ObornFromObject = { tf: false, passage: [], objectID: \"\" };\n  let OdiesWithoutChildren = { tf: false, passage: [] };\n\n  let childrenTemp: entityInfo[] = [];\n  connections.forEach(tie => {\n    // For each of the connections already found,\n    // build the associated entity object, and\n    // populate with existing information\n\n    let tieNoY =\n      tie.predicate === \"is born by autochthony [in/or/at]\" ||\n      tie.predicate === \"comes into being\" ||\n      tie.predicate === \"has no children\"\n        ? true\n        : false;\n    // Checking for X (tie) Y where Y does not exist/is empty\n    let d: entityInfo = {\n      target: tieNoY ? \"\" : tie.target,\n      targetID: tieNoY ? \"\" : tie.targetID,\n      passage: tie.passage,\n      type: tieNoY\n        ? \"\"\n        : entities[tie.targetID]\n        ? entities[tie.targetID][\"Type of entity\"]\n        : \"\"\n    };\n\n    /* Categorising the connections, also checking for duplicates */\n\n    // X is your MOTHER\n    if (tie.predicate === \"is mother of\") {\n      // If passage is a duplicate / already exists\n      // for this entity, or  in the list of connections\n      relationships.MOTHERS = checkAndRemoveDuplicates(\n        relationships.MOTHERS,\n        d\n      );\n    }\n\n    // X is your FATHER\n    else if (tie.predicate === \"is father of\") {\n      relationships.FATHERS = checkAndRemoveDuplicates(\n        relationships.FATHERS,\n        d\n      );\n    }\n\n    // X is your CHILD\n    else if (tie.predicate === \"is child of\") {\n      childrenTemp = checkAndRemoveDuplicates(childrenTemp, d);\n    }\n\n    // X is your SIBLING\n    else if (\n      tie.predicate === \"is sibling of\" ||\n      tie.predicate === \"is older than\"\n    ) {\n      relationships.SIBLINGS = checkAndRemoveDuplicates(\n        relationships.SIBLINGS,\n        d\n      );\n    }\n\n    // X is your TWIN\n    else if (tie.predicate === \"is twin of\") {\n      relationships.TWIN = checkAndRemoveDuplicates(relationships.TWIN, d);\n    }\n    // X is your WIFE / HUSBAND\n    else if (tie.predicate === \"is spouse of\" || tie.predicate === \"marries\") {\n      relationships.SPOUSES = checkAndRemoveDuplicates(\n        relationships.SPOUSES,\n        d\n      );\n    }\n    // X is a MEMBER of a collective but the main ID\n    else if (tie.predicate === \"is member of\") {\n      members.super = checkAndRemoveDuplicates(members.super, d);\n    } else if (tie.predicate === \"has members\") {\n      members.sub = checkAndRemoveDuplicates(members.sub, d);\n    }\n\n    /*\n     *\n     *     UNUSUAL RELATIONSHIPS\n     *\n     */\n\n    // X is your MOTHER by parthenogenesis\n    else if (tie.predicate === \"is born by autochthony [in/on/at]\") {\n      Oautochthony = { tf: true, passage: tie.passage };\n    } else if (tie.predicate === \"comes into being\") {\n      OcreatedWithoutParents = { tf: true, passage: tie.passage };\n    } else if (tie.predicate === \"creates [agent]\") {\n      relationships.CREATORS = checkAndRemoveDuplicates(\n        relationships.CREATORS,\n        d\n      );\n      OcreatedByAgent = {\n        tf: true,\n        passage: tie.passage,\n        agentID: tie.targetID\n      };\n    } else if (tie.predicate === \"is born from [object]\") {\n      relationships.BORNFROM = checkAndRemoveDuplicates(\n        relationships.BORNFROM,\n        d\n      );\n      ObornFromObject = {\n        tf: true,\n        passage: tie.passage,\n        objectID: tie.targetID\n      };\n    } else if (tie.predicate === \"is mother by parthenogenesis of\") {\n      Oparthenogenesis = { tf: true, passage: tie.passage };\n    } else if (tie.predicate === \"is born from\") {\n      ObornFromObject = { tf: true, passage: tie.passage, objectID: \"\" }; //TODO: Add object info here, and import object\n    } else if (tie.predicate === \"has no children\") {\n      OdiesWithoutChildren = { tf: true, passage: tie.passage };\n    }\n  });\n\n  /* TODO: Check for any indirect siblings in the ties */\n  relationships.SIBLINGS = getIndirectSiblings(\n    id,\n    relationships.MOTHERS,\n    relationships.FATHERS,\n    relationships.SIBLINGS\n  );\n\n  /* Alphabetize the relationships */\n  relationships.MOTHERS = alphabetize(relationships.MOTHERS);\n  relationships.FATHERS = alphabetize(relationships.FATHERS);\n  relationships.SIBLINGS = alphabetize(relationships.SIBLINGS);\n  relationships.TWIN = alphabetize(relationships.TWIN);\n  relationships.SPOUSES = alphabetize(relationships.SPOUSES);\n  relationships.CREATORS = alphabetize(relationships.CREATORS);\n  relationships.BORNFROM = alphabetize(relationships.BORNFROM);\n  members.super = alphabetize(members.super);\n  members.sub = alphabetize(members.sub);\n  // Currently very inefficient, but finds the other parent of the child\n  relationships.CHILDREN = getOtherParents(id, childrenTemp);\n  // relationships.CHILDREN = alphabetizeChildren(relationships.CHILDREN);\n\n  /* Return alphabetized, complete list of relationships */\n\n  let connection: returningInfo = {\n    id: id,\n    relationships: relationships,\n    name: name,\n    members: members,\n    type: type,\n    validSearch: true,\n    unusual: {\n      autochthony: Oautochthony,\n      createdWithoutParents: OcreatedWithoutParents,\n      createdByAgent: OcreatedByAgent,\n      parthenogenesis: Oparthenogenesis,\n      bornFromObject: ObornFromObject,\n      diesWithoutChildren: OdiesWithoutChildren\n    },\n    alternativeName: { targetID: \"\", passage: [] }\n  };\n  return connection;\n};\n\n/******************************************************************************************/\n/* Check passage and entity duplicates                                                    */\n/* -------------------------------------------------------------------------------------- */\n/* This function removes duplicate ties (incl. after reversal) and duplicate passages   */\n/* for the same connected entity                                                          */\n/******************************************************************************************/\nconst checkAndRemoveDuplicates = (entities: any[], d: entityInfo) => {\n  let duplicate = false;\n  entities.forEach(e => {\n    if (e.targetID === d.targetID) {\n      duplicate = true;\n      let passageDuplicate = false;\n      e.passage.forEach(p => {\n        if (\n          p.startID === d.passage[0].startID &&\n          p.endID === d.passage[0].endID\n        ) {\n          passageDuplicate = true;\n        }\n      });\n      if (!passageDuplicate) {\n        e.passage.push(d.passage[0]);\n      }\n    }\n  });\n  if (!duplicate) {\n    entities.push(d);\n  }\n  return entities;\n};\n\nconst checkAndRemoveParentDuplicates = (\n  child: entityInfo, //child to add\n  parentsList: string[], //list of child's parents\n  parentsGrouped: childrenInfo[] //existing parents list to update\n) => {\n  // This function removes duplicates but also groups children by the \"other\" parent\n  // returns childrenInfo object: {child: <list of associated children>, otherParentIDs}\n\n  // If the same child appears under two different \"otherParent\"s, then contest is expressed\n  // The child will be under {child: <list of children>, otherParents: <list of all parents + contested>}\n  let parentDuplicate = false;\n  let childDuplicate = false;\n\n  for (let i = 0; i < parentsGrouped.length; i++) {\n    if (isEqual(parentsList, parentsGrouped[i])) {\n      // Is parent duplicate. Now check if child is already in list.\n      parentDuplicate = true;\n      for (let j = 0; j < parentsGrouped[i].child.length; j++) {\n        if (parentsGrouped[i].child[j].targetID === child.targetID) {\n          childDuplicate = true;\n        }\n      }\n      if (!childDuplicate) {\n        parentsGrouped[i].child.push(child);\n      }\n    }\n  }\n\n  if (!childDuplicate && !parentDuplicate) {\n    let newChild: childrenInfo = {\n      child: [child],\n      otherParentIDs: parentsList\n    };\n    parentsGrouped.push(newChild);\n  }\n\n  return parentsGrouped;\n};\n\n/******************************************************************************************/\n/* Alphabetize the list of names in each category                                         */\n/******************************************************************************************/\nconst alphabetize = (relation: any[]) => {\n  if (relation.length === 0) {\n    return [];\n  } else {\n    relation.sort(function(a, b) {\n      var relationA = a.target.toUpperCase();\n      var relationB = b.target.toUpperCase();\n      return relationA < relationB ? -1 : relationA > relationB ? 1 : 0;\n    });\n  }\n  return relation;\n};\n\nconst alphabetizeIDs = (relation: any[]) => {\n  if (relation.length === 0) {\n    return [];\n  } else {\n    relation.sort(function(a, b) {\n      var relationA = a.targetID;\n      var relationB = b.targetID;\n      return relationA < relationB ? -1 : relationA > relationB ? 1 : 0;\n    });\n  }\n  return relation;\n};\n\n/******************************************************************************************/\n/* Check if two arrays are equal                                                          */\n/******************************************************************************************/\nconst isEqual = (parentsList: any[], child: childrenInfo) => {\n  if (parentsList.length !== child.otherParentIDs.length) {\n    return false;\n  } else {\n    for (let i = 0; i < parentsList.length; i++) {\n      if (parentsList[i] !== child.otherParentIDs[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n};\n\n/******************************************************************************************/\n/* TODO: Fix this very VERY inefficient method of finding the other parent.               */\n/* Swap for shared NodegoatID                                                             */\n/******************************************************************************************/\nconst getOtherParents = (id: string, children: entityInfo[]) => {\n  let mainGender = getGender(id);\n  let parentsGrouped: childrenInfo[] = [];\n  children.forEach(c => {\n    if (relationships[c.targetID] !== undefined) {\n      var parentsList;\n      if (mainGender === \"Female\") {\n        parentsList = JSON.parse(relationships[c.targetID]).relationships\n          .FATHERS;\n      } else {\n        //temporary solution to undefined gender\n        parentsList = JSON.parse(relationships[c.targetID]).relationships\n          .MOTHERS;\n      }\n      // Convert list of entityInfo to a list of IDs\n      for (let i = 0; i < parentsList.length; i++) {\n        parentsList[i] = parentsList[i].targetID;\n      }\n      parentsList = alphabetizeIDs(parentsList);\n      parentsGrouped = checkAndRemoveParentDuplicates(\n        c,\n        parentsList,\n        parentsGrouped\n      );\n    }\n  });\n  return parentsGrouped;\n};\n\n/******************************************************************************************/\n/* Get the gender of the entity                                                           */\n/******************************************************************************************/\nexport const getGender = (id: string) => {\n  return entities[id] ? entities[id][\"Agent/Coll.: gender\"] : \"\";\n};\n\n/******************************************************************************************/\n/* Tie reversals                                                   */\n/* -------------------------------------------------------------------------------------- */\n/* This function flips the predicate so that X can become the direct object,                   */\n/* without compromising the validity of the tie                                         */\n/*                                                                                        */\n/* e.g. X <is mother of> Y, where Y is <male>                                             */\n/* => returns predicate <is son of>, to let X become the direct object (Y is son of X)         */\n/******************************************************************************************/\nconst reversedPredicate = (predicate: string, dirObject: string) => {\n  // TODO: Fix this temporary solution for gender data not existing for entity\n  // PARENT -> CHILD\n  if (predicate === \"is parent of\") {\n    // Uses generic \"is child of\" since data cards do not show gender specificity for children\n    return \"is child of\";\n  }\n\n  // CHILD -> PARENT\n  else if (predicate === \"is child of\") {\n    if (getGender(dirObject) === \"Female\") {\n      return \"is mother of\";\n    } else if (getGender(dirObject) === \"Male\") {\n      return \"is father of\";\n    } else {\n      // Placeholder since \"is parent of\" is not currently used in data cards\n      return \"\";\n    }\n  }\n\n  // TWIN -> TWIN\n  else if (predicate === \"is twin of\") {\n    return \"is twin of\";\n  }\n\n  // SIBLING -> SIBLING\n  else if (predicate === \"is sibling of\" || predicate === \"is older than\") {\n    return \"is sibling of\";\n  }\n\n  // WIFE -> HUSBAND\n  // HUSBAND -> WIFE\n  // No cases of homosexual relationships in the mythology\n  else if (predicate === \"is spouse of\" || predicate === \"marries\") {\n    return \"is spouse of\";\n  } else if (predicate === \"is member of\" || predicate === \"is part of\") {\n    return \"\";\n  } else {\n    console.log(\n      \"Unsure of \" +\n        predicate +\n        \" \" +\n        dirObject +\n        \" connection, or connection is not relevant for the datacards.\",\n      predicate,\n      dirObject\n    );\n    return \"\";\n  }\n};\n\n/******************************************************************************************/\n/* Populate an array of siblings based on matching parents                                */\n/* -------------------------------------------------------------------------------------- */\n/* This function checks through the list of ties and pushes to the list of siblings:    */\n/*                                                                                        */\n/* e.g. X is <child> of A, X is <child> of B, Y is <child> of A, Y is <child> of B        */\n/******************************************************************************************/\nconst getIndirectSiblings = (\n  id: string,\n  mothers: any[],\n  fathers: any[],\n  siblings: any[]\n) => {\n  // CURRENTLY A VERY SLOW SOLUTION - OPTIMIZE IT LATER\n  // CHANGE TO POPULATING A DATABASE OF RELATIONS AND READING OFF THAT DATABASE\n  // RATHER THAN DYNAMICALLY GENERATING IT HERE (CHANGE TO O(N) NOT LEAVE AS O(N^3))\n  // ALTERNATIVELY: Use Nodegoat ID to determine those in the same datum ID, and then match those\n\n  let newsiblings: {} = {};\n  Object.values(ties).forEach(function(tieRow) {\n    if (typeof tieRow !== \"object\" || tieRow === null) {\n    } else {\n      let testsibling = {\n        motherMatch: false,\n        fatherMatch: false,\n        info: {}\n      };\n      let passageInfo: passageInfo[] = [\n        {\n          start: tieRow[\"Passage: start\"],\n          startID: tieRow[\"Passage: start ID\"],\n          end: tieRow[\"Passage: end\"] === \"\" ? \"\" : tieRow[\"Passage: end\"],\n          endID: tieRow[\"Passage: end ID\"]\n        }\n      ];\n      let testinfo: entityInfo = {\n        target: \"\",\n        targetID: \"\",\n        passage: passageInfo,\n        type: entities[id] ? entities[id][\"Type of entity\"] : \"\"\n      };\n      // Firstly, determine where Y is <child> of A,B\n      if (\n        tieRow[\"Predicate\"] === \"is daughter of\" ||\n        tieRow[\"Predicate\"] === \"is son of\" ||\n        tieRow[\"Predicate\"] === \"is child of\"\n      ) {\n        mothers.forEach(m => {\n          if (m.targetID === tieRow[\"Direct Object ID\"]) {\n            testsibling.motherMatch = true;\n            testinfo.target = getName(entities[tieRow[\"Subject ID\"]]);\n            testinfo.targetID = tieRow[\"Subject ID\"];\n            testsibling.info = testinfo;\n            if (!(tieRow[\"Subject ID\"] in newsiblings)) {\n              newsiblings[tieRow[\"Subject ID\"]] = testsibling;\n            } else {\n              newsiblings[tieRow[\"Subject ID\"]].motherMatch = true;\n            }\n          }\n        });\n        fathers.forEach(f => {\n          if (f.targetID === tieRow[\"Direct Object ID\"]) {\n            testsibling.fatherMatch = true;\n            testinfo.target = getName(entities[tieRow[\"Subject ID\"]]);\n            testinfo.targetID = tieRow[\"Subject ID\"];\n            testsibling.info = testinfo;\n            if (!(tieRow[\"Subject ID\"] in newsiblings)) {\n              newsiblings[tieRow[\"Subject ID\"]] = testsibling;\n            } else {\n              newsiblings[tieRow[\"Subject ID\"]].fatherMatch = true;\n            }\n          }\n        });\n      }\n      // Then, determine where A is mother of Y, or if parent of Y where A is female\n      if (\n        tieRow[\"Predicate\"] === \"is mother of\" ||\n        tieRow[\"Predicate\"] === \"is divine mother of\" ||\n        (tieRow[\"Predicate\"] === \"is parent of\" &&\n          entities[tieRow[\"Subject ID\"]] &&\n          entities[tieRow[\"Subject ID\"]][\"Agent/Coll.: gender\"] === \"Female\")\n      ) {\n        mothers.forEach(m => {\n          if (m.targetID === tieRow[\"Subject ID\"]) {\n            testsibling.motherMatch = true;\n            testinfo.target = getName(entities[tieRow[\"Direct Object ID\"]]);\n            testinfo.targetID = tieRow[\"Direct Object ID\"];\n            testsibling.info = testinfo;\n            if (!(tieRow[\"Direct Object ID\"] in newsiblings)) {\n              newsiblings[tieRow[\"Direct Object ID\"]] = testsibling;\n            } else {\n              newsiblings[tieRow[\"Direct Object ID\"]].motherMatch = true;\n            }\n          }\n        });\n      }\n      // Then, determine where A is father of Y, or if parent of Y where A is male\n      if (\n        tieRow[\"Predicate\"] === \"is father of\" ||\n        tieRow[\"Predicate\"] === \"is divine father of\" ||\n        (tieRow[\"Predicate\"] === \"is parent of\" &&\n          entities[tieRow[\"Subject ID\"]] &&\n          entities[tieRow[\"Subject ID\"]][\"Agent/Coll.: gender\"] === \"Male\")\n      ) {\n        fathers.forEach(f => {\n          if (f.targetID === tieRow[\"Subject ID\"]) {\n            testsibling.fatherMatch = true;\n            testinfo.target = getName(entities[tieRow[\"Direct Object ID\"]]);\n            testinfo.targetID = tieRow[\"Direct Object ID\"];\n            testsibling.info = testinfo;\n            if (!(tieRow[\"Direct Object ID\"] in newsiblings)) {\n              newsiblings[tieRow[\"Direct Object ID\"]] = testsibling;\n            } else {\n              newsiblings[tieRow[\"Direct Object ID\"]].fatherMatch = true;\n            }\n          }\n        });\n      }\n    }\n  });\n  let keys: any[] = Object.keys(newsiblings);\n  keys.forEach(k => {\n    if (\n      !newsiblings[k].motherMatch ||\n      !newsiblings[k].fatherMatch ||\n      k === id\n    ) {\n      delete newsiblings[k];\n    } else {\n      siblings = checkAndRemoveDuplicates(siblings, newsiblings[k].info);\n    }\n  });\n  return siblings;\n};\n\n/******************************************************************************************/\n/* Check if no relations exist for this entity (used in DataCards.tsx)                    */\n/******************************************************************************************/\nexport const checkNoRelations = (relationships: any) => {\n  return (\n    relationships.MOTHERS.length === 0 &&\n    relationships.FATHERS.length === 0 &&\n    relationships.SIBLINGS.length === 0 &&\n    relationships.TWIN.length === 0 &&\n    relationships.SPOUSES.length === 0 &&\n    relationships.CHILDREN.length === 0\n  );\n};\n\nexport const checkNoMembers = (members: any) => {\n  return !members || members.length === 0;\n};\n\n/******************************************************************************************/\n/* Return all alternative names for entity (used in DataCards.tsx)                        */\n/******************************************************************************************/\nexport const getAlternativeNames = (id: string) => {\n  let alternatives: string = \"\";\n  alternatives += getNameString(\"Name (transliteration)\", alternatives, id);\n  alternatives += getNameString(\"Name (Greek font)\", alternatives, id);\n  alternatives += getNameString(\"Name (Latinized)\", alternatives, id);\n  alternatives += getNameString(\"Name in Latin texts\", alternatives, id);\n  alternatives += getNameString(\"Alternative names\", alternatives, id);\n\n  if (alternatives === \"\") {\n    return alternatives;\n  } else {\n    return \"(Also known as: \" + alternatives + \")\";\n  }\n};\n\nconst getNameString = (parameter: string, stringSoFar: string, id: string) => {\n  let s = \"\";\n  if (entities[id][parameter] !== \"\") {\n    if (stringSoFar === \"\") {\n      s = entities[id][parameter];\n    } else {\n      s = stringSoFar + \", \" + entities[id][parameter];\n    }\n  }\n  return s;\n};\n\n/******************************************************************************************/\n/* Get the entity's name                                                                  */\n/******************************************************************************************/\nexport const getName = (entityRow: any) => {\n  let possibleNames = [\n    \"Name (house style)\",\n    \"Name (transliteration)\",\n    \"Name (Greek font)\",\n    \"Name (Latinized)\",\n    \"Name in Latin texts\",\n    \"Alternative names\"\n  ];\n  if (entityRow) {\n    for (let i = 0; i < possibleNames.length; i++) {\n      if (\n        entityRow[possibleNames[i]] &&\n        entityRow[possibleNames[i]] !== \"\" &&\n        entityRow[possibleNames[i]] !== undefined\n      ) {\n        return entityRow[possibleNames[i]];\n      }\n      return \"\";\n    }\n  } else {\n    return \"\";\n  }\n};\n\n/******************************************************************************************/\n/* Get the entity type                                                                    */\n/******************************************************************************************/\nexport const getEntityType = (id: string) => {\n  if (entities[id]) {\n    if (entities[id][\"Type of entity\"] === \"Collective (Episodic)\") {\n      return \"Collective (Episodic)\";\n    } else if (entities[id][\"Type of entity\"] === \"Collective (misc.)\") {\n      return \"Collective (Miscellaneous)\";\n    } else if (entities[id][\"Type of entity\"] === \"Collective (genealogical)\") {\n      return \"Collective (Genealogical)\";\n    } else {\n      return \"\";\n    }\n  } else {\n    return \"\";\n  }\n};\n","// template from: https://konvajs.org/docs/react/index.html\n// Refs (stage and components): https://reactjsexample.com/react-binding-to-canvas-element-via-konva-framework/\nimport React, { Component } from \"react\";\nimport Konva from \"konva\";\nimport { Stage, Layer, Text, Rect, Line, Image } from \"react-konva\";\nimport relationships from \"./data/relationships.json\";\nimport { getName } from \"./DataCardHandler\";\nimport entities from \"./data/entities.json\";\nimport useImage from \"use-image\";\nimport passages from \"./data/passages.json\";\n\nclass EntityGraph extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allShapes: [],\n      stageRef: undefined,\n      graphAttr: {\n        initX: 150,\n        spaceX: 200,\n        nodeWidth: 150,\n        nodeHeight: 80,\n        NegOneY: 100,\n        ZeroY: 400,\n        PosOneY: 700\n      },\n      connectedShapes: [\"edge1\", \"node3\", \"node5\"], // Nodes and links that are connected with each other\n      depthNodes: {\n        depthNegOne: [],\n        depthZero: [],\n        depthPosOne: []\n      },\n      lineLinks: [],\n      entityData: {},\n      id: \"\",\n      openInfoPage: {\n        showContestPage: false,\n        contest: undefined,\n        showUnusualPage: false,\n        unusual: undefined\n      }\n    };\n    this.getDepthNodes = this.getDepthNodes.bind(this);\n    this.getPassageLink = this.getPassageLink.bind(this);\n  }\n\n  /*****************************************************\n   *\n   *\n   *   SETUP METHODS\n   *\n   *\n   *****************************************************/\n  componentDidMount() {\n    // log stage react wrapper (reference)\n    console.log(this.refs.stage);\n    // log Konva.Stage instance (reference)\n    console.log(this.refs.stage.getStage());\n    // Get all children from the stage (equiiv. to stage.layers.<allchildren>)\n    // Get the object with the specified name (use \".\"+name)\n    console.log(this.refs.stage.find(\".name1\"));\n    // Use \"each()\" operator to sift through all items in the collection\n    // Use \"each\" here and \"forEach\" everywhere else and when referencinig this.state.allShapes\n    this.refs.stage.children[1].children.each(function(shape) {\n      console.log(\"Test\", shape.attrs.id);\n    });\n    console.log(this.refs.stage.children[1].children);\n    console.log(\"IDs:\", JSON.parse(relationships[this.props.id]));\n\n    // THE FOLLOWING POPULATES THE GRAPH WITH DEFUALT RELATIONSHIP INFORMATION (AGAMEMNON) AS THIS DEALS WIIH UNDEFINED ERRORS\n    // SPACE-WASTING BUT WORKS AS A TEMPORARY SOLUTION\n    let entityData = JSON.parse(relationships[this.props.id]);\n    let connectionsList = this.getConnectionsList(entityData, this.props.id);\n    // Set states\n    this.setState({\n      allShapes: this.refs.stage.children[1].children,\n      stageRef: this.refs.stage,\n      id: this.props.id,\n      entityData: entityData,\n      depthNodes: this.getDepthNodes(entityData),\n      lineLinks: this.geAllLinePoints(\n        this.getDepthNodes(entityData),\n        entityData,\n        connectionsList\n      ),\n      openInfoPage: {\n        showContestPage: false,\n        contest: undefined,\n        showUnusualPage: false,\n        unusual: undefined\n      }\n    });\n  }\n\n  componentDidUpdate() {\n    if (this.props.id !== this.state.id) {\n      // deal with agamemnon (default value) not showing up\n      let entityData = JSON.parse(relationships[this.props.id]);\n      let depthNodes = this.getDepthNodes(entityData);\n\n      // Create a connection calculator here\n      let connectionsList = this.getConnectionsList(entityData, this.props.id);\n\n      this.setState({\n        allShapes: this.refs.stage.children[1].children,\n        stageRef: this.refs.stage,\n        id: this.props.id,\n        entityData: entityData,\n        depthNodes: depthNodes,\n        lineLinks: this.geAllLinePoints(\n          depthNodes,\n          entityData,\n          connectionsList\n        ),\n        openInfoPage: {\n          showContestPage: false,\n          contest: undefined,\n          showUnusualPage: false,\n          unusual: undefined\n        }\n      });\n    }\n  }\n\n  getRandomPoints = () => {\n    let edge = [];\n    this.state.allShapes.forEach(function(shape) {\n      edge.push(shape.attrs.x + 75);\n      edge.push(shape.attrs.y + 40);\n    });\n    return edge;\n  };\n\n  /*****************************************************\n   *\n   *\n   *   GETTERS AND SETTERS\n   *\n   *\n   *****************************************************/\n\n  /* GET ALL NODES AND THEIR DEPTHS / GENERATION */\n  getDepthNodes = entityData => {\n    let depthNegOne = [],\n      depthZero = [],\n      depthPosOne = [];\n\n    //Parents and step-parents depth -1\n    entityData.relationships.MOTHERS.forEach(m => {\n      depthNegOne.push(m.targetID);\n    });\n    entityData.relationships.FATHERS.forEach(f => {\n      depthNegOne.push(f.targetID);\n    });\n    entityData.relationships.CREATORS.forEach(c => {\n      depthNegOne.push(c.targetID);\n    });\n    entityData.relationships.BORNFROM.forEach(b => {\n      depthNegOne.push(b.targetID);\n    });\n\n    // Create unusual nodes, and add them to the end of depth -1\n    // TODO deal with depth Zero nodes too\n    if (entityData.unusual.autochthony.tf) {\n      depthNegOne.push(\"autochthony_NegOne\");\n    } else if (entityData.unusual.parthenogenesis.tf) {\n      depthNegOne.push(\"parthenogenesis_NegOne\");\n    } else if (entityData.unusual.bornFromObject.tf) {\n      depthNegOne.push(\"bornFromObject_NegOne\");\n    } else if (entityData.unusual.createdByAgent.tf) {\n      depthNegOne.push(\"createdByAgent_NegOne\");\n    } else if (entityData.unusual.createdWithoutParents.tf) {\n      depthNegOne.push(\"createdWithoutParents_NegOne\");\n    } else if (entityData.unusual.diesWithoutChildren.tf) {\n      depthNegOne.push(\"diesWithoutChildren_NegOne\");\n    }\n\n    //siblings, twins and spouses depth 0\n    entityData.relationships.SIBLINGS.forEach(s => {\n      depthZero.push(s.targetID);\n    });\n    entityData.relationships.TWIN.forEach(t => {\n      depthZero.push(t.targetID);\n    });\n    entityData.relationships.SPOUSES.forEach(s => {\n      depthZero.push(s.targetID);\n    });\n\n    // + all other parents\n    //children depth +1\n    for (let d = 0; d < entityData.relationships.CHILDREN.length; d++) {\n      entityData.relationships.CHILDREN[d].child.forEach(c => {\n        depthPosOne = this.checkForDuplicates(depthPosOne, c.targetID);\n      });\n      entityData.relationships.CHILDREN[d].otherParentIDs.forEach(p => {\n        depthZero = this.checkForDuplicates(depthZero, p); // NOte that the above deals with entityInfo type, but this (aka. highlighted node) is just ID\n      });\n    }\n\n    // Add the central node in the graph. Removes 3-parent contest resulting in \"OR\" on the main node, see Aerope\n    if (depthZero.length > 3) {\n      depthZero.splice(Math.ceil(depthZero.length / 2), 0, this.props.id); // NOte that the above deals with entityInfo type, but this (aka. highlighted node) is just ID\n    } else {\n      depthZero.splice(0, 0, this.props.id);\n    }\n\n    return {\n      depthNegOne: depthNegOne,\n      depthZero: depthZero,\n      depthPosOne: depthPosOne\n    };\n  };\n\n  checkForDuplicates = (arr, e) => {\n    if (arr.includes(e)) {\n      return arr;\n    } else {\n      arr.push(e);\n      return arr;\n    }\n  };\n\n  /* GET THE CONNECTIONS BETWEEN ENTITIES BASED ON THE RELATIONSHIPS GIVEN */\n  /* returns: [{parents: [list of ids], children: [list of ids], pNodeDepth: <depthNegOne, depthZero, depthPosOne>} , {...}] */\n  getConnectionsList = (entityData, id) => {\n    let allConnections = [];\n\n    //MOTHER+FATHER -> YOU+SIBLING+TWIN\n    if (\n      entityData.relationships.MOTHERS.length > 0 ||\n      entityData.relationships.FATHERS.length > 0\n    ) {\n      let connection = { parents: [], children: [], pNodeDepth: \"\" };\n      let parentsDepth = entityData.relationships.MOTHERS.concat(\n        entityData.relationships.FATHERS\n      );\n      parentsDepth.forEach(p => {\n        connection.parents.push(p.targetID);\n      });\n      let childrenDepth = entityData.relationships.SIBLINGS.concat(\n        entityData.relationships.TWIN\n      );\n      childrenDepth.forEach(c => {\n        connection.children.push(c.targetID);\n      });\n      connection.children.push(id);\n      connection.pNodeDepth = \"depthNegOne\";\n      allConnections.push(connection);\n    }\n\n    //YOU+OTHERPARENTID -> CHILDREN\n    if (entityData.relationships.CHILDREN.length > 0) {\n      entityData.relationships.CHILDREN.forEach(cp => {\n        let connection = { parents: [], children: [], pNodeDepth: \"\" };\n        cp.child.forEach(c => {\n          connection.children.push(c.targetID);\n        });\n        cp.otherParentIDs.forEach(p => {\n          connection.parents.push(p);\n        });\n        connection.parents.push(id);\n        connection.pNodeDepth = \"depthZero\";\n        allConnections.push(connection);\n      });\n    }\n\n    //Check if spouse is already listed in otherParentIDs in children. If not, means is connection without children.    //TODO: BORN FROM (OBJECT)\n    if (entityData.relationships.SPOUSES.length > 0) {\n      entityData.relationships.SPOUSES.forEach(s => {\n        if (!this.isSpouseRepeated(s.targetID, allConnections)) {\n          allConnections.push({ parents: [id, s.targetID], children: [] });\n          // TODO: Deal with children is empty when spouse without children\n        }\n      });\n    }\n\n    //IF UNUSUAL RELATIONSHIP:\n    if (entityData.unusual.autochthony.tf) {\n      allConnections.push({\n        parents: [\"autochthony_NegOne\"],\n        children: [id],\n        pNodeDepth: \"depthNegOne\"\n      });\n    } else if (entityData.unusual.parthenogenesis.tf) {\n    } else if (entityData.unusual.bornFromObject.tf) {\n    } else if (entityData.unusual.createdByAgent.tf) {\n    } else if (entityData.unusual.createdWithoutParents.tf) {\n    } else if (entityData.unusual.diesWithoutChildren.tf) {\n    }\n\n    return allConnections;\n  };\n\n  /* GET LINE POINTS BASED ON THE LINE CONNECTIONS FOUND */\n\n  // Create an array holding all relationships between entities, parent+parent->children+siblings [[P,P,C,S], [...]]\n  geAllLinePoints = (depthNodes, entityData, connections) => {\n    console.log(connections);\n    let allLinePoints = [];\n\n    /*\n     *    (p1)                  (p2)\n     *     |                     ^ |\n     *     |                     | |\n     *     v                     | v\n     *    (p1L)---------------->(p2L)\n     *               (pM)<---------\n     *                |\n     *                |\n     *                v\n     *  (c1U)<------(cM)     /->(c2U)\n     *    | ^ --------------/     |\n     *    | |                     |\n     *    v |                     v\n     *   (c1)                   (c2)\n     */\n\n    // [P1, P1L, P2L, P2, P2L, PM] [PM, CU, C1U, C1, C1U, C2U, C2]\n    //Connect parent nodes\n    let width = this.state.graphAttr.nodeWidth;\n    let height = this.state.graphAttr.nodeHeight;\n    let diff = 50;\n    let initX = this.state.graphAttr.initX;\n    let spaceX = this.state.graphAttr.spaceX;\n\n    /* TODO: FIX THIS FOR GENERATION-ANONYMOUS */\n    for (let i = 0; i < connections.length; i++) {\n      // connections[INDEX] = {parents: [id1, id2, ...], children: [id1, id2, ...]}\n\n      // TODO: Make the following more efficient\n      let linePoints = [];\n\n      let PM_Y = 0,\n        PM_X = 0;\n\n      // Get the depth of the nodes\n      let depth;\n      if (connections[i].pNodeDepth === \"depthNegOne\") {\n        depth = depthNodes.depthNegOne;\n        PM_Y = this.state.graphAttr.NegOneY + height + diff; // Assign PM_Y value here\n      } else {\n        depth = depthNodes.depthZero;\n        PM_Y = this.state.graphAttr.ZeroY + height + diff; // Assign PM_Y value here\n      }\n\n      // Get middle X location first (average of all X values)\n      connections[i].parents.forEach(p => {\n        let pX = initX + depth.indexOf(p) * spaceX;\n        PM_X = PM_X + pX;\n        console.log(p, depth, depth.indexOf(p), PM_X);\n      });\n      PM_X =\n        connections[i].parents.length > 1 // Removes division by 0 error\n          ? (PM_X + width) / connections[i].parents.length\n          : PM_X + width / 2;\n\n      // Check parent nodes. PM -> PL -> P -> PL -> PM. This joins the lines at the middle point for each connection.\n      connections[i].parents.forEach(p => {\n        let pIndex = depth.indexOf(p);\n        let pY = 0;\n        if (connections[i].pNodeDepth === \"depthNegOne\") {\n          pY = this.state.graphAttr.NegOneY + height;\n        } else {\n          pY = this.state.graphAttr.ZeroY + height;\n        }\n        linePoints.push(PM_X, PM_Y); //PM\n        linePoints.push(initX + pIndex * spaceX + width / 2, PM_Y); //PL\n        linePoints.push(\n          initX + pIndex * spaceX + width / 2,\n          pY //P\n        );\n        linePoints.push(initX + pIndex * spaceX + width / 2, PM_Y); //PL\n        linePoints.push(PM_X, PM_Y); //PM\n      });\n\n      // Check children nodes\n      if (connections[i].children.length > 0) {\n        let CM_Y = 0;\n        // Update the Y location to the depth for children\n        if (connections[i].pNodeDepth === \"depthNegOne\") {\n          depth = depthNodes.depthZero;\n          CM_Y = this.state.graphAttr.ZeroY - diff; // Assign PM_Y value here\n        } else {\n          depth = depthNodes.depthPosOne;\n          CM_Y = this.state.graphAttr.PosOneY - diff; // Assign PM_Y value here\n        }\n\n        // Add a line from the existing (PM_X, PM_Y) spot to (PM_X, CM_Y)\n        linePoints.push(PM_X, CM_Y);\n\n        // CM -> CL -> C -> CL -> CM. This joins the lines at the middle point for each connection.\n        connections[i].children.forEach(c => {\n          let cIndex = depth.indexOf(c);\n          let cY = 0;\n          if (connections[i].pNodeDepth === \"depthNegOne\") {\n            cY = this.state.graphAttr.ZeroY;\n          } else {\n            cY = this.state.graphAttr.PosOneY;\n          }\n          linePoints.push(PM_X, CM_Y); //CM\n          linePoints.push(initX + cIndex * spaceX + width / 2, CM_Y); //CL\n          linePoints.push(\n            initX + cIndex * spaceX + width / 2,\n            cY //C\n          );\n          linePoints.push(initX + cIndex * spaceX + width / 2, CM_Y); //CL\n          linePoints.push(PM_X, CM_Y); //CM\n        });\n      }\n\n      //Create line name (aka. all the nodes involved)\n      let name = connections[i].parents\n        .concat(connections[i].children)\n        .toString();\n\n      // TODO: Check if the connection is unusual or contested;\n      let unusual = { tf: false, type: \"\", passage: undefined };\n      let contested = {\n        tf: false,\n        type: \"\",\n        passageLinks: undefined,\n        contestedParents: undefined,\n        uncontestedParents: undefined,\n        child: undefined\n      };\n\n      // Check Parent -> Main Node\n      if (connections[i].pNodeDepth === \"depthNegOne\") {\n        // UNUSUAL: Since the depth in question is depth -1 => one of the children must be the main entity\n        // Only check unusual status and contested status of the main entity\n        if (entityData.unusual.autochthony.tf) {\n          unusual = {\n            tf: true,\n            type: \"autochthony\",\n            passage: entityData.unusual.autochthony.passage\n          };\n        } else if (entityData.unusual.createdWithoutParents.tf) {\n          unusual = {\n            tf: true,\n            type: \"createdWithoutParents\",\n            passage: entityData.unusual.createdWithoutParents.passage\n          };\n        } else if (entityData.unusual.createdByAgent.tf) {\n          unusual = {\n            tf: true,\n            type: \"createdByAgent\",\n            passage: entityData.unusual.createdByAgent.passage\n          };\n        } else if (entityData.unusual.parthenogenesis.tf) {\n          unusual = {\n            tf: true,\n            type: \"parthenogenesis\",\n            passage: entityData.unusual.parthenogenessis.passage\n          };\n        } else if (entityData.unusual.bornFromObject.tf) {\n          unusual = {\n            tf: true,\n            type: \"bornFromObject\",\n            passage: entityData.unusual.bornFromObject.passage\n          };\n        } else if (entityData.unusual.diesWithoutChildren.tf) {\n          //TODO: deal with this in a more suitable place\n          unusual = {\n            tf: true,\n            type: \"diesWithoutChildren\",\n            passage: entityData.unusual.diesWithoutChildren.passage\n          };\n        }\n\n        // CONTESTED: Check if the main entity has > two parents. If so, is contested\n        // TODO: Make this more complex - note what Greta said about the complexity of contested relationships\n        if (connections[i].parents.length > 2) {\n          // CURRENTLY ASSUMES ONLY ONE SIDE HAS MORE THAN ONE PARENT\n          let contestedParents = [];\n          let uncontestedParents;\n          let passageLinks = [];\n          if (entityData.relationships.MOTHERS.length > 1) {\n            contestedParents = entityData.relationships.MOTHERS;\n            entityData.relationships.MOTHERS.forEach(m => {\n              passageLinks.push(m.passage);\n            });\n            uncontestedParents = entityData.relationships.FATHERS[0];\n          } else {\n            // (entityData.relationships.FATHERS.length > 1) {\n            contestedParents = entityData.relationships.FATHERS;\n            entityData.relationships.MOTHERS.forEach(m => {\n              passageLinks.push(m.passage);\n            });\n            uncontestedParents = entityData.relationships.MOTHERS[0];\n          }\n          contested = {\n            tf: true,\n            type: \"Contested tradition\",\n            passageLinks: passageLinks,\n            contestedParents: contestedParents,\n            uncontestedParents: uncontestedParents,\n            child: entityData.id\n          }; // contestedParents - the list of all parents that are contested, e.g. contested mothers, contested fathers\n        }\n      }\n      // Check Main Node -> Children\n      else if (connections[i].pNodeDepth === \"depthZero\") {\n        // UNUSUAL: Since the main node is one of the parents,\n        // loop through every child for unusuality\n        connections[i].children.forEach(c => {\n          let cRelationships = JSON.parse(relationships[c]);\n\n          // Check for unusualness\n          if (cRelationships.unusual.autochthony.tf) {\n            unusual = { tf: true, type: \"autochthony\" };\n          } else if (cRelationships.unusual.createdWithoutParents.tf) {\n            unusual = { tf: true, type: \"createdWithoutParents\" };\n          } else if (cRelationships.unusual.createdByAgent.tf) {\n            unusual = { tf: true, type: \"createdByAgent\" };\n          } else if (cRelationships.unusual.parthenogenesis.tf) {\n            unusual = { tf: true, type: \"parthenogenesis\" };\n          } else if (cRelationships.unusual.bornFromObject.tf) {\n            unusual = { tf: true, type: \"bornFromObject\" };\n          } else if (cRelationships.unusual.diesWithoutChildren.tf) {\n            //TODO: deal with this in a more suitable place\n            unusual = { tf: true, type: \"diesWithoutChildren\" };\n          } else {\n            // Leave overall connection unusualness as false\n          }\n\n          // CONTESTED: Check if the child has > two parents (one of which is the main character). If so, is contested\n          // TODO: Make this more complex - note what Greta said about the complexity of contested relationships\n          if (\n            cRelationships.relationships.MOTHERS.length +\n              cRelationships.relationships.FATHERS.length >\n            2\n          ) {\n            // CURRENTLY ASSUMES ONLY ONE SIDE HAS MORE THAN ONE PARENT\n            let contestedParents = [];\n            let uncontestedParents; //uncontested parents (singular)\n            let passageLinks = [];\n            if (cRelationships.relationships.MOTHERS.length > 1) {\n              contestedParents = cRelationships.relationships.MOTHERS;\n              cRelationships.relationships.MOTHERS.forEach(m => {\n                passageLinks.push(m.passage);\n              });\n              uncontestedParents = cRelationships.relationships.FATHERS[0];\n            } else {\n              // (entityData.relationships.FATHERS.length > 1) {\n              contestedParents = cRelationships.relationships.FATHERS;\n              cRelationships.relationships.MOTHERS.forEach(m => {\n                passageLinks.push(m.passage);\n              });\n              uncontestedParents = cRelationships.relationships.MOTHERS[0];\n            }\n            contested = {\n              tf: true,\n              type: \"Contested tradition\",\n              passageLinks: passageLinks,\n              contestedParents: contestedParents,\n              uncontestedParents: uncontestedParents,\n              child: c\n            }; // contestedParents - the list of all parents that are contested, e.g. contested mothers, contested fathers\n          }\n        });\n      }\n      // TODO: Check if the connection is contested\n      allLinePoints.push({\n        name: name,\n        points: linePoints,\n        unusual: unusual,\n        contested: contested\n      });\n      // allLinePoints.push({ name: name, points: linePoints });\n    }\n    return allLinePoints;\n  };\n\n  isSpouseRepeated = (sID, allConnections) => {\n    let repeated = false;\n    for (let i = 0; i < allConnections.length; i++) {\n      allConnections[i].parents.forEach(pID => {\n        if (sID === pID) {\n          repeated = true;\n        }\n      });\n    }\n    return repeated;\n  };\n\n  getPassageLink(passage) {\n    let id = passage.startID;\n    console.log(\"ID\", passage);\n    let author = passages[id].Author;\n    let title = passages[id].Title;\n    let start = passages[id].Passage;\n    let end = passage.endID;\n\n    // Dealing with multiple URNs\n    let URN = \"\";\n    let URNsplit = passages[id][\"CTS URN\"].split(\", \");\n    if (URNsplit.length >= 2) {\n      URN = URNsplit[1];\n    } else {\n      URN = passages[id][\"CTS URN\"];\n    }\n\n    URN = \"https://scaife.perseus.org/reader/\" + URN;\n    if (passage.endID !== \"\") {\n      end = passages[end].Passage;\n      URN = URN + \"-\" + end;\n    }\n    URN = URN + \"/?right=perseus-eng2\";\n\n    return (\n      <span>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href={URN}\n          style={{\n            color: \"grey\",\n            fontSize: \"16px\"\n          }}\n        >\n          {author + \", \"}\n          <span style={{ fontStyle: \"italic\" }}>{title}</span> {start}\n          {start !== end && end !== \"\" ? \"-\" + end : \"\"}\n        </a>\n      </span>\n    );\n  }\n\n  /****************************************************\n   *\n   *\n   *   EVENT HANDLERS\n   *\n   *\n   ****************************************************/\n\n  /* Node handling */\n  handleMouseOverNode = e => {\n    document.body.style.cursor = \"pointer\";\n    e.target.to({\n      strokeWidth: 8\n    });\n  };\n  handleMouseOutNode = e => {\n    document.body.style.cursor = \"default\";\n    e.target.to({\n      strokeWidth: 4\n    });\n  };\n\n  handlePageChange = e => {\n    this.props.relationshipClicked(e.target.attrs.id);\n  };\n\n  /* Line handling (contested + unusual) */\n  handleMouseOverLine = e => {\n    // thicken the main line\n    e.target.to({\n      strokeWidth: 8,\n      opacity: 1\n    });\n    // thicken the nodes attached to the line\n    let nodeIDs = e.target.attrs.name.split(\",\");\n    nodeIDs.forEach(id => {\n      if (id !== \"autochthony_NegOne\") {\n        let nodeWithID = this.state.stageRef.find(\".\" + id);\n        nodeWithID.to({\n          strokeWidth: 8\n        });\n        if (e.target.attrs.unusual.tf) {\n          document.body.style.cursor = \"pointer\";\n          nodeWithID.to({\n            stroke: \"#ff0000\"\n          });\n        }\n        if (e.target.attrs.contested.tf) {\n          document.body.style.cursor = \"pointer\";\n          nodeWithID.to({\n            stroke: \"#0000ff\"\n          });\n        }\n      }\n    });\n\n    if (e.target.attrs.contested.tf) {\n      let sumX = 0;\n      let numExistingContestNodes = 0;\n      let y = 0;\n      let padding = 40;\n      e.target.attrs.contested.contestedParents.forEach(p => {\n        if (this.state.stageRef.find(\".\" + p.targetID)[0]) {\n          let pAttrs = this.state.stageRef.find(\".\" + p.targetID)[0].attrs;\n          sumX = sumX + pAttrs.x;\n          numExistingContestNodes++;\n          y = pAttrs.y;\n        } else {\n          // Only occurs if the relationship is contested but the dsputed parent is not shown, e.g. Atreus\n          padding = 15;\n        }\n      });\n      let x =\n        (sumX + this.state.graphAttr.nodeWidth) / numExistingContestNodes -\n        padding;\n      let ORText = new Konva.Text({\n        name: \"ORText\",\n        x: x,\n        y: y + 30,\n        text: \"OR\",\n        fontSize: 15,\n        fontStyle: \"bold\",\n        fill: \"#0000ff\",\n        width: 80,\n        height: 80,\n        align: \"center\"\n      });\n      this.state.stageRef.children[1].add(ORText);\n    }\n  };\n\n  handleMouseOutLine = e => {\n    // thin the main line\n    document.body.style.cursor = \"default\";\n    e.target.to({\n      strokeWidth: 4,\n      opacity:\n        e.target.attrs.unusual.tf || e.target.attrs.contested.tf ? 1 : 0.3\n    });\n    // thicken the nodes attached to the line\n    let nodeDs = e.target.attrs.name.split(\",\");\n    nodeDs.forEach(id => {\n      if (id !== \"autochthony_NegOne\") {\n        this.state.stageRef.find(\".\" + id).to({\n          strokeWidth: 4,\n          stroke: \"#000000\"\n        });\n      }\n    });\n\n    if (e.target.attrs.contested.tf) {\n      this.state.stageRef.children[1].find(\".ORText\")[0].remove();\n    }\n  };\n\n  handleClickedLine = e => {\n    if (e.target.attrs.unusual.tf) {\n      console.log(\"Unusual\", e.target.attrs);\n      //this.props.handleUnusualClicked = e.target.attrs.unusual;\n      this.setState({\n        openInfoPage: {\n          showContestPage: false,\n          contest: undefined,\n          showUnusualPage: true,\n          unusual: e.target.attrs.unusual\n        }\n      });\n    } else if (e.target.attrs.contested.tf) {\n      this.setState({\n        openInfoPage: {\n          showContestPage: true,\n          contest: e.target.attrs.contested,\n          showUnusualPage: false,\n          unusual: undefined\n        }\n      });\n    } else {\n      this.setState({\n        openInfoPage: {\n          showContestPage: false,\n          contest: undefined,\n          showUnusualPage: false,\n          unusual: undefined\n        }\n      }); //  Is a normal relationship line, do nothing\n    }\n  };\n\n  // Clicked icons\n  handleClickedIcons = e => {\n    console.log(\"Icon clicked\", e);\n  };\n\n  /****************************************************\n   *\n   *\n   *   RENDERING\n   *\n   *\n   ****************************************************/\n\n  render() {\n    //Icons for unusual relationships\n    const AutochthonyIcon = e => {\n      const [image] = useImage(require(\"./images/autochthony.png\"));\n      console.log(e.name, e.x, e.y);\n      return (\n        <Image\n          image={image}\n          name={e.name}\n          x={e.x + 20}\n          y={e.y}\n          width={100}\n          height={80}\n          onClick={this.handleClickedIcons}\n        />\n      );\n    };\n\n    return (\n      <React.Fragment>\n        {/* Legend */}\n        <div style={{ textAlign: \"center\", marginBottom: \"2rem\" }}>\n          <h1>Graph Legend</h1>\n          <img\n            alt=\"graph legend\"\n            src={require(\"./images/legend.png\")}\n            style={{ maxWidth: \"80%\" }}\n          ></img>\n          <p></p>Hover over elements to show the connections. Clicking on the\n          nodes will direct you to the graph for that node.\n        </div>\n        {/* Info pages for unusual and contested relationships */}\n        <div\n          style={{\n            margin: \"20px 96px 20px 96px\",\n            border: \"1px solid #000000\",\n            boxShadow: \"2px 2px 4px 2px #bbbbbb\",\n            background: \"#ffffff\"\n          }}\n          className={\n            this.state.openInfoPage.showContestPage ? \"\" : \"no-display\"\n          }\n        >\n          <div\n            style={{\n              margin: \"20px\",\n              border: \"3px solid #0000ff\",\n              padding: \"2rem 4rem 4rem 4rem\"\n            }}\n          >\n            <h2 style={{ textAlign: \"center\" }}>Contested Tradition </h2>\n            <p></p>\n            <p style={{ fontStyle: \"italic\", textAlign: \"center\" }}>\n              (inconsistencies between retellings of the tradition)\n            </p>\n            <p>\n              Contestation is an inherent part of Greek myth. Because the\n              ancient mythic tradition was tolerant of plurality, there were\n              frequently several variant traditions about who the parents of a\n              god or hero were.\n            </p>\n            <p>In this case, the contestation is:</p>\n            {console.log(this.state.openInfoPage)}\n            {this.state.openInfoPage.contest\n              ? this.state.openInfoPage.contest.contestedParents.map((c, i) => {\n                  return (\n                    <div\n                      style={{ fontSize: \"1.3rem\", margin: \"1rem 0 1rem 0\" }}\n                    >\n                      <span style={{ fontWeight: \"bold\" }}>\n                        {getName(\n                          entities[this.state.openInfoPage.contest.child]\n                        )}\n                      </span>{\" \"}\n                      is child of{\" \"}\n                      <span style={{ fontWeight: \"bold\" }}>\n                        {getName(\n                          entities[\n                            this.state.openInfoPage.contest.uncontestedParents\n                              .targetID\n                          ]\n                        )}\n                      </span>{\" \"}\n                      and{\" \"}\n                      <span style={{ fontWeight: \"bold\" }}>\n                        {getName(entities[c.targetID])}\n                      </span>{\" \"}\n                      according to{\" \"}\n                      <span>\n                        {this.state.openInfoPage.contest.passageLinks[i].map(\n                          (p, i) => {\n                            if (\n                              i ===\n                              this.state.openInfoPage.contest.passageLinks[i]\n                                .length -\n                                1\n                            ) {\n                              return this.getPassageLink(p);\n                            } else {\n                              return (\n                                <span>\n                                  {this.getPassageLink}\n                                  {\" and\"}\n                                </span>\n                              );\n                            }\n                          }\n                        )}\n                      </span>\n                      {i ===\n                      this.state.openInfoPage.contest.contestedParents.length -\n                        1 ? (\n                        \"\"\n                      ) : (\n                        <div>\n                          <p></p>OR<p></p>\n                        </div>\n                      )}\n                    </div>\n                  );\n                })\n              : \"\"}\n          </div>\n        </div>\n        {this.state.openInfoPage.showUnusualPage ? (\n          <div>\n            <img\n              alt=\"autochthony icon\"\n              src={require(\"./images/autochthony.png\")}\n            ></img>\n          </div>\n        ) : (\n          <span></span>\n        )}\n        {/* Graph rendering with KonvajS */}\n        <Stage ref=\"stage\" width={6000} height={2000}>\n          <Layer>\n            {this.state.depthNodes.depthNegOne.map((e, i) => (\n              <Text\n                x={this.state.graphAttr.initX + this.state.graphAttr.spaceX * i}\n                ref=\"text\"\n                y={this.state.graphAttr.NegOneY}\n                text={getName(entities[e])}\n                fontSize={18}\n                fontFamily=\"Calibri\"\n                fontStyle=\"bold\"\n                fill=\"#000\"\n                width={this.state.graphAttr.nodeWidth}\n                height={this.state.graphAttr.nodeHeight}\n                padding={20}\n                align=\"center\"\n              />\n            ))}\n            {this.state.depthNodes.depthZero.map((e, i) => (\n              <Text\n                x={this.state.graphAttr.initX + this.state.graphAttr.spaceX * i}\n                ref=\"text\"\n                y={this.state.graphAttr.ZeroY}\n                text={getName(entities[e])}\n                fontSize={18}\n                fontFamily=\"Calibri\"\n                fontStyle=\"bold\"\n                fill=\"#000\"\n                width={this.state.graphAttr.nodeWidth}\n                height={this.state.graphAttr.nodeHeight}\n                padding={20}\n                align=\"center\"\n              />\n            ))}\n            {this.state.depthNodes.depthPosOne.map((e, i) => (\n              <Text\n                x={this.state.graphAttr.initX + this.state.graphAttr.spaceX * i}\n                ref=\"text\"\n                y={this.state.graphAttr.PosOneY}\n                text={getName(entities[e])}\n                fontSize={18}\n                fontFamily=\"Calibri\"\n                fontStyle=\"bold\"\n                fill=\"#000\"\n                width={this.state.graphAttr.nodeWidth}\n                height={this.state.graphAttr.nodeHeight}\n                padding={20}\n                align=\"center\"\n              />\n            ))}\n          </Layer>\n          <Layer>\n            {this.state.depthNodes.depthNegOne.map((e, i) =>\n              e === \"autochthony_NegOne\" ? (\n                <AutochthonyIcon\n                  name=\"autochthony_NegOne\"\n                  x={\n                    this.state.graphAttr.initX + this.state.graphAttr.spaceX * i\n                  }\n                  y={this.state.graphAttr.NegOneY}\n                />\n              ) : (\n                <Rect\n                  refs={\"rect\"}\n                  id={e}\n                  name={e}\n                  x={\n                    this.state.graphAttr.initX + this.state.graphAttr.spaceX * i\n                  }\n                  y={this.state.graphAttr.NegOneY}\n                  width={this.state.graphAttr.nodeWidth}\n                  height={this.state.graphAttr.nodeHeight}\n                  stroke=\"#000\"\n                  strokeWidth={4}\n                  onMouseOver={this.handleMouseOverNode}\n                  onMouseOut={this.handleMouseOutNode}\n                  onClick={this.handlePageChange}\n                />\n              )\n            )}\n            {this.state.depthNodes.depthZero.map((e, i) => (\n              <Rect\n                refs={\"rect\"}\n                id={e}\n                name={e}\n                x={this.state.graphAttr.initX + this.state.graphAttr.spaceX * i}\n                y={this.state.graphAttr.ZeroY}\n                width={this.state.graphAttr.nodeWidth}\n                height={this.state.graphAttr.nodeHeight}\n                stroke=\"#000\"\n                strokeWidth={4}\n                onMouseOver={this.handleMouseOverNode}\n                onMouseOut={this.handleMouseOutNode}\n                onClick={this.handlePageChange}\n              />\n            ))}\n            {this.state.depthNodes.depthPosOne.map((e, i) => (\n              <Rect\n                refs={\"rect\"}\n                id={e}\n                name={e}\n                x={this.state.graphAttr.initX + this.state.graphAttr.spaceX * i}\n                y={this.state.graphAttr.PosOneY}\n                width={this.state.graphAttr.nodeWidth}\n                height={this.state.graphAttr.nodeHeight}\n                stroke=\"#000\"\n                strokeWidth={4}\n                onMouseOver={this.handleMouseOverNode}\n                onMouseOut={this.handleMouseOutNode}\n                onClick={this.handlePageChange}\n              />\n            ))}\n\n            {this.state.lineLinks.map((e, i) => (\n              <Line\n                name={e.name}\n                points={e.points}\n                unusual={e.unusual}\n                contested={e.contested}\n                stroke={\n                  e.unusual.tf\n                    ? \"#ff0000\"\n                    : e.contested.tf\n                    ? \"#0000ff\"\n                    : \"#000000\"\n                }\n                opacity={e.unusual.tf || e.contested.tf ? 1 : 0.3}\n                strokeWidth={4}\n                onMouseOver={this.handleMouseOverLine}\n                onMouseOut={this.handleMouseOutLine}\n                onClick={this.handleClickedLine}\n              />\n            ))}\n          </Layer>\n        </Stage>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default EntityGraph;\n","import React from \"react\";\nimport \"./App.css\";\nimport \"./DataCards.scss\";\nimport queryString from \"querystring\";\nimport passages from \"./data/passages.json\";\nimport relationships from \"./data/relationships.json\";\nimport EntityGraph from \"./EntityGraph.jsx\";\nimport ReactGA from \"react-ga\";\nimport entities from \"./data/entities.json\";\nimport {\n  relationshipInfo,\n  entityInfo,\n  checkNoRelations,\n  getAlternativeNames,\n  getGender,\n  getName\n} from \"./DataCardHandler\";\nimport Pluralize from \"pluralize\";\n\ntype DatumProps = {\n  location: {\n    search: string;\n  };\n  history: {\n    push: ({}) => null;\n  };\n};\ntype DatumState = {\n  id: string;\n  name: string;\n  relationships: relationshipInfo;\n  members: { sub: any[]; super: any[] };\n  type: string;\n  validSearch: boolean;\n  unusual: {\n    autochthony: { tf: boolean; passage: any[] };\n    createdWithoutParents: { tf: boolean; passage: any[] };\n    createdByAgent: { tf: boolean; passage: any[]; agentID: string };\n    parthenogenesis: { tf: boolean; passage: any[] };\n    bornFromObject: { tf: boolean; passage: any[]; objectID: string };\n    diesWithoutChildren: { tf: boolean; passage: any[] };\n  };\n  alternativeName: { targetID: string; passage: any[] };\n};\n\nclass DataCards extends React.Component<DatumProps, DatumState> {\n  constructor(props: any) {\n    super(props);\n    // Dionysus is 8188175, use to test multiple names\n    // Atreus is 8187873\n    // Theseus is 8188822\n    // Agamemnon is 8182035\n    // Use Clytaimnestra example, 8188055\n    this.state = {\n      id: \"8182035\", // placeholder: Agamemnon\n      name: \"\",\n      relationships: {\n        MOTHERS: [],\n        FATHERS: [],\n        CREATORS: [],\n        BORNFROM: [],\n        SIBLINGS: [],\n        TWIN: [],\n        SPOUSES: [],\n        CHILDREN: []\n      },\n      members: { sub: [], super: [] },\n      type: \"\",\n      validSearch: false,\n      unusual: {\n        autochthony: { tf: false, passage: [] },\n        createdWithoutParents: { tf: false, passage: [] },\n        createdByAgent: { tf: false, passage: [], agentID: \"\" },\n        parthenogenesis: { tf: false, passage: [] },\n        bornFromObject: { tf: false, passage: [], objectID: \"\" },\n        diesWithoutChildren: { tf: false, passage: [] }\n      },\n      alternativeName: { targetID: \"\", passage: [] }\n    };\n    /* this.getNameFromID = this.getNameFromID.bind(this);\n    this.checkNoRelations = this.checkNoRelations.bind(this);\n    this.reversedVerb = this.reversedVerb.bind(this);\n    this.getDataPoints = this.getDataPoints.bind(this); */\n    this.handleNameClicked = this.handleNameClicked.bind(this);\n    // this.handleContestClicked = this.handleContestClicked.bind(this);\n    /* this.getAlternativeNames = this.getAlternativeNames.bind(this); */\n  }\n\n  /*******************/\n  /* HELPER FUNCTIONS */\n  /*******************/\n\n  getPassageLink(passage: any) {\n    let id = passage.startID;\n    let author: string = passages[id].Author;\n    let title: string = passages[id].Title;\n    let start: string = passages[id].Passage;\n    let end: string = passage.endID;\n\n    // Dealing with multiple URNs\n    let URN: string = \"\";\n    let URNsplit = passages[id][\"CTS URN\"].split(\", \");\n    if (URNsplit.length >= 2) {\n      URN = URNsplit[1];\n    } else {\n      URN = passages[id][\"CTS URN\"];\n    }\n\n    URN = \"https://scaife.perseus.org/reader/\" + URN;\n    if (passage.endID !== \"\") {\n      end = passages[end].Passage;\n      URN = URN + \"-\" + end;\n    }\n    URN = URN + \"/?right=perseus-eng2\";\n\n    return (\n      <span>\n        {\"  (\"}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href={URN}\n          style={{\n            color: \"grey\",\n            fontSize: \"0.8rem\"\n          }}\n        >\n          {author + \", \"}\n          <span style={{ fontStyle: \"italic\" }}>{title}</span> {start}\n          {start !== end && end !== \"\" ? \"-\" + end : \"\"}\n        </a>\n        {\")\"}\n      </span>\n    );\n  }\n\n  handleNameClicked(targetID: string) {\n    ReactGA.event({\n      category: \"NameClicked\",\n      action: \"User clicked on a name within the data card\"\n    });\n    this.props.history.push(\"/datacards?id=\" + targetID);\n  }\n\n  /* handleContestClicked(edge: any, id: string) {\n    console.log(\"edge\", edge, \"id\", id);\n    this.setState({\n      openInfoPage: { showContestPage: true, showUnusualPage: false }\n    });\n  } */\n\n  removeGrandparentDuplicates(grandparents: entityInfo[], g: entityInfo[]) {\n    //grandparents = the original grandparents list\n    //g = a list of new entities to add\n    for (let i = 0; i < g.length; i++) {\n      let duplicate = false;\n      let duplicateIndex = 0;\n      for (let j = 0; j < grandparents.length; j++) {\n        if (g[i].targetID === grandparents[j].targetID) {\n          duplicate = true;\n          duplicateIndex = j;\n          break;\n        }\n      }\n      if (duplicate) {\n        let newPassages = grandparents[duplicateIndex].passage.concat(\n          g[i].passage\n        );\n        grandparents[duplicateIndex].passage = newPassages;\n      } else {\n        grandparents.push(g[i]);\n      }\n    }\n    return grandparents;\n  }\n\n  getGrandparentDataPoints() {\n    let that = this;\n    let grandparents: entityInfo[] = [];\n    // Check all mother's mother and fathers\n    that.state.relationships.MOTHERS.forEach(m => {\n      grandparents = this.removeGrandparentDuplicates(\n        grandparents,\n        JSON.parse(relationships[m.targetID]).relationships.MOTHERS\n      );\n      grandparents = this.removeGrandparentDuplicates(\n        grandparents,\n        JSON.parse(relationships[m.targetID]).relationships.FATHERS\n      );\n    });\n    that.state.relationships.FATHERS.forEach(f => {\n      grandparents = this.removeGrandparentDuplicates(\n        grandparents,\n        JSON.parse(relationships[f.targetID]).relationships.MOTHERS\n      );\n      grandparents = this.removeGrandparentDuplicates(\n        grandparents,\n        JSON.parse(relationships[f.targetID]).relationships.FATHERS\n      );\n    });\n    //Remove duplicate grandparents\n    for (let i = 0; i < grandparents.length; i++) {\n      for (let j = i + 1; j < grandparents.length; j++) {}\n    }\n    //Add grandparent data points\n    if (grandparents.length > 0) {\n      return (\n        <div style={{ clear: \"both\" }}>\n          <div\n            style={{\n              fontWeight: \"bold\",\n              textTransform: \"uppercase\",\n              float: \"left\",\n              paddingRight: \"1rem\",\n              marginTop: \"0.5rem\"\n            }}\n          >\n            {grandparents.length === 1 ? \"GRANDPARENT:\" : \"GRANDPARENTS:\"}\n          </div>\n          <div style={{ float: \"left\", marginTop: \"0.5rem\" }}>\n            {grandparents.map(entity => {\n              return (\n                <div style={{ margin: \"0\" }}>\n                  <span>\n                    <div\n                      className=\"entity-button\"\n                      onClick={() => this.handleNameClicked(entity.targetID)}\n                    >\n                      <span style={{ textDecoration: \"underline\" }}>\n                        {entity.target}\n                      </span>\n                    </div>\n                  </span>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      );\n    } else {\n      return <span></span>;\n    }\n\n    // Create grandparent title data point\n    // Check all mother's mother & father IDs\n    // Check all father's mother  & father IDs\n    // Generate the data points using getDataPoints and getUnusualConnectionsetc. below\n  }\n\n  getPluralization(relationship: string) {\n    if (relationship === \"PART OF\") {\n      return relationship + \": \";\n    } else if (relationship === \"MOTHERS\" || relationship === \"FATHERS\") {\n      return Pluralize.singular(relationship) + \": \";\n    } else if (\n      relationship === \"CHILDREN\" &&\n      this.state.relationships[relationship].length === 1 &&\n      this.state.relationships[relationship][0].child.length > 1\n    ) {\n      return relationship + \": \";\n    } else {\n      if (\n        this.state.relationships[relationship].length === 1 ||\n        this.state.relationships[relationship].length === 0\n      ) {\n        return Pluralize.singular(relationship) + \": \";\n      } else {\n        return relationship + \": \";\n      }\n    }\n  }\n\n  entityNameAndPassage(\n    entity: any,\n    relationship: string,\n    showPassage: boolean\n  ) {\n    let firstElement;\n    if (relationship === \"PART OF\") {\n      firstElement = this.state.members.super[0];\n    } else {\n      firstElement = this.state.relationships[relationship][0];\n    }\n    return (\n      <div>\n        <div\n          className=\"entity-button\"\n          onClick={() => this.handleNameClicked(entity.targetID)}\n        >\n          {entity !== firstElement &&\n          relationship !== \"SIBLINGS\" &&\n          relationship !== \"SPOUSES\" ? (\n            <span>OR </span>\n          ) : (\n            \"\"\n          )}\n          <span style={{ textDecoration: \"underline\" }}>{entity.target}</span>\n        </div>\n        {showPassage\n          ? entity.passage.map(passage => {\n              return this.getPassageLink(passage);\n            })\n          : \"\"}\n      </div>\n    );\n  }\n\n  objectNameAndPassage(entity: any) {\n    return (\n      <div>\n        <div className=\"entity-button\">\n          {entity !== this.state.relationships[\"BORNFROM\"][0] ? (\n            <span>OR </span>\n          ) : (\n            \"\"\n          )}\n          {entity.target}\n        </div>\n        {entity.passage.map(passage => {\n          return this.getPassageLink(passage);\n        })}\n      </div>\n    );\n  }\n\n  getDataPoints(relationship: any) {\n    // FATHER: autochthony, parthenogenesis & multiple fathers\n    if (relationship === \"FATHERS\") {\n      if (this.state.unusual.parthenogenesis.tf) {\n        return (\n          <div style={{ clear: \"both\" }}>\n            <div className=\"relationship-header\">\n              {this.getPluralization(relationship)}\n            </div>\n\n            <div style={{ float: \"left\", marginTop: \"0.5rem\", margin: \"0\" }}>\n              {this.state.relationships[relationship].map(e => {\n                return this.entityNameAndPassage(e, relationship, true);\n              })}\n              {/* parthenogenesis part */}\n              <div className=\"entity-button\">\n                {this.state.relationships[relationship].length === 0\n                  ? \"by parthenogenesis\"\n                  : \"OR by parthenogenesis\"}\n              </div>\n              {this.state.unusual.parthenogenesis.passage.map(passage => {\n                return this.getPassageLink(passage);\n              })}\n            </div>\n          </div>\n        );\n      } else if (this.state.unusual.autochthony.tf) {\n        return (\n          <div style={{ clear: \"both\" }}>\n            <div className=\"relationship-header\">\n              {this.getPluralization(relationship)}\n            </div>\n            <div style={{ float: \"left\", marginTop: \"0.5rem\", margin: \"0\" }}>\n              {this.state.relationships[relationship].map(e => {\n                return this.entityNameAndPassage(e, relationship, true);\n              })}\n              {/* autochthony part */}\n              <div className=\"entity-button\">\n                {this.state.relationships[relationship].length === 0\n                  ? \"by autochthony\"\n                  : \"OR by autochthony\"}\n              </div>\n              {this.state.unusual.autochthony.passage.map(passage => {\n                return this.getPassageLink(passage);\n              })}\n            </div>\n          </div>\n        );\n      } else if (this.state.unusual.createdWithoutParents.tf) {\n        return (\n          <div style={{ clear: \"both\" }}>\n            <div className=\"relationship-header\">\n              {this.getPluralization(relationship)}\n            </div>\n            <div style={{ float: \"left\", marginTop: \"0.5rem\", margin: \"0\" }}>\n              {this.state.relationships[relationship].map(e => {\n                return this.entityNameAndPassage(e, relationship, true);\n              })}\n              {/* created without parents part */}\n              <div className=\"entity-button\">\n                {this.state.relationships[relationship].length === 0\n                  ? \"created without parents\"\n                  : \"OR created without parents\"}\n              </div>\n              {this.state.unusual.createdWithoutParents.passage.map(passage => {\n                return this.getPassageLink(passage);\n              })}\n            </div>\n          </div>\n        );\n      } else if (this.state.relationships[relationship].length > 0) {\n        return (\n          <div style={{ clear: \"both\" }}>\n            <div className=\"relationship-header\">\n              {this.getPluralization(relationship)}\n            </div>\n            <div style={{ float: \"left\", marginTop: \"0.5rem\", margin: \"0\" }}>\n              {this.state.relationships[relationship].map(e => {\n                return this.entityNameAndPassage(e, relationship, true);\n              })}\n            </div>\n          </div>\n        );\n      } else {\n        return <span></span>;\n      }\n    }\n\n    // MOTHER: autochthony, creation without parents\n    else if (relationship === \"MOTHERS\") {\n      if (this.state.unusual.createdWithoutParents.tf) {\n        return (\n          <div style={{ clear: \"both\" }}>\n            <div className=\"relationship-header\">\n              {this.getPluralization(relationship)}\n            </div>\n            <div style={{ float: \"left\", marginTop: \"0.5rem\", margin: \"0\" }}>\n              {this.state.relationships[relationship].map(e =>\n                this.entityNameAndPassage(e, relationship, true)\n              )}\n              <div className=\"entity-button\">\n                {this.state.relationships[relationship].length === 0\n                  ? \"created without parents\"\n                  : \"OR created without parents\"}\n              </div>\n              {this.state.unusual.createdWithoutParents.passage.map(passage => {\n                return this.getPassageLink(passage);\n              })}\n            </div>\n          </div>\n        );\n      } else if (this.state.unusual.autochthony.tf) {\n        return (\n          <div style={{ clear: \"both\" }}>\n            <div className=\"relationship-header\">\n              {this.getPluralization(relationship)}\n            </div>\n            <div style={{ float: \"left\", marginTop: \"0.5rem\", margin: \"0\" }}>\n              {this.state.relationships[relationship].map(e => {\n                return this.entityNameAndPassage(e, relationship, true);\n              })}\n              {/* autochthony part */}\n              <div className=\"entity-button\">\n                {this.state.relationships[relationship].length === 0\n                  ? \"by autochthony\"\n                  : \"OR by autochthony\"}\n              </div>\n              {this.state.unusual.autochthony.passage.map(passage => {\n                return this.getPassageLink(passage);\n              })}\n            </div>\n          </div>\n        );\n      } else if (this.state.relationships[relationship].length > 0) {\n        return (\n          <div style={{ clear: \"both\" }}>\n            <div className=\"relationship-header\">\n              {this.getPluralization(relationship)}\n            </div>\n            <div style={{ float: \"left\", marginTop: \"0.5rem\", margin: \"0\" }}>\n              {this.state.relationships[relationship].map(e => {\n                return this.entityNameAndPassage(e, relationship, true);\n              })}\n            </div>\n          </div>\n        );\n      } else {\n        return <span></span>;\n      }\n    }\n\n    //CREATORS:\n    else if (\n      relationship === \"CREATORS\" &&\n      this.state.relationships[relationship].length > 0\n    ) {\n      return (\n        <div style={{ clear: \"both\" }}>\n          <div className=\"relationship-header\">\n            {this.getPluralization(relationship)}\n          </div>\n          <div style={{ float: \"left\", marginTop: \"0.5rem\", margin: \"0\" }}>\n            {this.state.relationships[relationship].map(e => {\n              return this.entityNameAndPassage(e, relationship, true);\n            })}\n          </div>\n        </div>\n      );\n    }\n\n    //BORN FROM:\n    else if (\n      relationship === \"BORNFROM\" &&\n      this.state.relationships[relationship].length > 0\n    ) {\n      return (\n        <div style={{ clear: \"both\" }}>\n          <div className=\"relationship-header\">BORN FROM: </div>\n          <div style={{ float: \"left\", marginTop: \"0.5rem\", margin: \"0\" }}>\n            {this.state.relationships[relationship].map(e => {\n              return this.objectNameAndPassage(e);\n            })}\n          </div>\n        </div>\n      );\n    }\n\n    //CHILDREN:\n    else if (\n      relationship === \"CHILDREN\" &&\n      (this.state.relationships[relationship].length > 0 ||\n        this.state.unusual.diesWithoutChildren.tf)\n    ) {\n      return (\n        <div style={{ clear: \"both\" }}>\n          <div className=\"relationship-header\">\n            {this.getPluralization(relationship)}\n          </div>\n          <div style={{ float: \"left\", marginTop: \"0.5rem\", margin: \"0\" }}>\n            {this.state.unusual.diesWithoutChildren.tf ? (\n              <div>\n                <div className=\"entity-button\">dies without children</div>\n                {this.state.unusual.diesWithoutChildren.passage.map(passage => {\n                  return this.getPassageLink(passage);\n                })}\n                {this.state.relationships.CHILDREN.length > 0 ? (\n                  <div>OR</div>\n                ) : (\n                  \"\"\n                )}\n              </div>\n            ) : (\n              <span></span>\n            )}\n\n            {this.state.relationships[relationship].map(entity => (\n              <div>\n                <div className=\"entity-child-wrapper\">\n                  <div className=\"entity-child-grouping\">\n                    {this.getChildParentGrouped(entity)}\n                  </div>\n                  {this.getOtherParentText(entity.otherParentIDs)}\n                </div>\n                <p></p>\n              </div>\n            ))}\n          </div>\n        </div>\n      );\n\n      //SPOUSES, TWINS, AND SIBLINGS\n    } else if (\n      (relationship === \"SPOUSES\" ||\n        relationship === \"TWIN\" ||\n        relationship === \"SIBLINGS\") &&\n      this.state.relationships[relationship].length > 0\n    ) {\n      return (\n        <div style={{ clear: \"both\" }}>\n          <div className=\"relationship-header\">\n            {this.getPluralization(relationship)}\n          </div>\n          <div style={{ float: \"left\", marginTop: \"0.5rem\", margin: \"0\" }}>\n            {this.state.relationships[relationship].map(e => {\n              return this.entityNameAndPassage(e, relationship, true);\n            })}\n          </div>\n        </div>\n      );\n    }\n\n    //PART OF (COLLECTIVE)\n    else if (relationship === \"PART OF\") {\n      return (\n        <div style={{ clear: \"both\" }}>\n          <div className=\"relationship-header\">PART OF: </div>\n          <div style={{ float: \"left\", marginTop: \"0.5rem\", margin: \"0\" }}>\n            {this.state.members.super.map(e => {\n              return this.entityNameAndPassage(e, relationship, true);\n            })}\n          </div>\n        </div>\n      );\n    }\n\n    //OTHER UNUSUAL RELATIONSHIP TYPES: CREATORS\n    else {\n      return <div></div>;\n    }\n  }\n\n  getChildParentGrouped(group: any) {\n    return group.child.map(c => {\n      return (\n        <div\n          className=\"entity-child-button\"\n          onClick={() => this.handleNameClicked(c.targetID)}\n        >\n          {c.target}\n        </div>\n      );\n    });\n  }\n\n  getOtherParentText(otherParentIDs: any[]) {\n    if (otherParentIDs.length === 0) {\n      return <div className=\"entity-parent-grouping\"></div>;\n    } else {\n      return (\n        <div className=\"entity-parent-grouping\">\n          with{\" \"}\n          {otherParentIDs.map(pID => {\n            return (\n              <span>\n                <span\n                  className=\"entity-child-button\"\n                  style={{ margin: 0 }}\n                  onClick={() => this.handleNameClicked(pID)}\n                >\n                  {getName(entities[pID])}\n                </span>\n                {otherParentIDs.indexOf(pID) === otherParentIDs.length - 1\n                  ? \"\"\n                  : \" OR \"}\n              </span>\n            );\n          })}\n        </div>\n      );\n    }\n  }\n\n  getCollectiveMembers() {\n    let that = this;\n    if (that.state.members.sub.length !== 0) {\n      return (\n        <div style={{ marginTop: \"3rem\", textAlign: \"center\" }}>\n          <div\n            style={{\n              fontWeight: \"bold\",\n              textTransform: \"uppercase\",\n              textDecoration: \"underline\",\n              marginBottom: \"0.5rem\",\n              marginTop: \"5rem\"\n            }}\n          >\n            MEMBERS:\n          </div>\n          {that.state.members.sub.map(member => {\n            return (\n              <div style={{ margin: \"0\" }}>\n                <span\n                  className=\"collective-button\"\n                  onClick={() => this.handleNameClicked(member.targetID)}\n                >\n                  {member.target}\n                </span>\n                {member.passage.map(passage => {\n                  return this.getPassageLink(passage);\n                })}\n              </div>\n            );\n          })}\n        </div>\n      );\n    }\n  }\n\n  getCollectiveSubheading(id: string) {\n    let relation = getGender(id) === \"Female\" ? \"daughters\" : \"sons\";\n    // How to deal with multiple of the same ID in the entities?\n    let parents = getName(\n      entities[entities[id][\"Collective (geneal.): children of ID\"]]\n    );\n    let otherParents = \"\";\n    if (entities[id][\"Other collective parent ID\"]) {\n      otherParents = getName(\n        entities[entities[id][\"Other collective parent ID\"]]\n      );\n    }\n    let divineParents = \"\";\n    if (entities[id][\"Collective (geneal.): divine father ID\"]) {\n      divineParents = getName(\n        entities[entities[id][\"Collective (geneal.): divine father ID\"]]\n      );\n    }\n    /* let parents: { mothers: string; fathers: string } = {\n      mothers: \"\",\n      fathers: \"\"\n    };\n    for (let i = 0; i < this.state.relationships.MOTHERS.length; i++) {\n      if (parents.mothers === \"\") {\n        parents.mothers = this.state.relationships.MOTHERS[i].target;\n      } else {\n        parents.mothers =\n          parents.mothers + \" OR \" + this.state.relationships.MOTHERS[i].target;\n      }\n    }\n    for (let i = 0; i < this.state.relationships.FATHERS.length; i++) {\n      if (parents.fathers === \"\") {\n        parents.fathers = this.state.relationships.FATHERS[i].target;\n      } else {\n        parents.fathers =\n          parents.fathers + \" OR \" + this.state.relationships.FATHERS[i].target;\n      }\n    }\n    let finalString = \"\";\n    if (parents.mothers !== \"\" && parents.fathers !== \"\") {\n      finalString = parents.mothers + \" and \" + parents.fathers;\n    } else if (parents.mothers !== \"\" && parents.fathers === \"\") {\n      finalString = parents.mothers;\n    } else if (parents.mothers === \"\" && parents.fathers !== \"\") {\n      finalString = parents.fathers;\n    } else {\n    } */\n\n    return (\n      <div id=\"datacard-alternativename\">\n        The {relation} of{\" \"}\n        <span\n          style={{ textDecoration: \"underline\", cursor: \"pointer\" }}\n          onClick={() =>\n            this.handleNameClicked(\n              entities[id][\"Collective (geneal.): children of ID\"]\n            )\n          }\n        >\n          {getName(\n            entities[entities[id][\"Collective (geneal.): children of ID\"]]\n          )}\n        </span>\n        {otherParents === \"\" ? (\n          \"\"\n        ) : (\n          <span>\n            {\" \"}\n            OR{\" \"}\n            <span\n              style={{ textDecoration: \"underline\", cursor: \"pointer\" }}\n              onClick={() =>\n                this.handleNameClicked(\n                  entities[id][\"Other collective parent ID\"]\n                )\n              }\n            >\n              {getName(entities[entities[id][\"Other collective parent ID\"]])}\n            </span>\n          </span>\n        )}{\" \"}\n        {divineParents === \"\" ? (\n          \"\"\n        ) : (\n          <span>\n            {\" \"}\n            OR{\" \"}\n            <span\n              style={{ textDecoration: \"underline\", cursor: \"pointer\" }}\n              onClick={() =>\n                this.handleNameClicked(\n                  entities[id][\"Collective (geneal.): divine father ID\"]\n                )\n              }\n            >\n              {getName(\n                entities[entities[id][\"Collective (geneal.): divine father ID\"]]\n              )}\n            </span>\n          </span>\n        )}\n      </div>\n    );\n  }\n\n  getAlternativePage() {\n    if (\n      this.state.alternativeName.targetID !== \"\" &&\n      this.state.alternativeName.passage !== []\n    ) {\n      return (\n        <div\n          id=\"datacard-alternativename\"\n          className={\n            this.state.alternativeName.targetID === \"\" ||\n            this.state.alternativeName.passage === []\n              ? \"no-display\"\n              : \"\"\n          }\n        >\n          Alternative name for{\" \"}\n          {this.state.alternativeName.targetID === \"\" ? (\n            \"\"\n          ) : (\n            <span>\n              <span\n                className=\"entity-alt-button\"\n                onClick={() =>\n                  this.handleNameClicked(this.state.alternativeName.targetID)\n                }\n              >\n                {getName(entities[this.state.alternativeName.targetID])}\n              </span>\n              {this.state.alternativeName.passage.map(passage => {\n                return this.getPassageLink(passage);\n              })}\n            </span>\n          )}\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n\n  /*******************/\n  /* SETUP FUNCTIONS */\n  /*******************/\n\n  componentDidMount() {\n    const params = queryString.parse(this.props.location.search.slice(1));\n    const id = params.id as string;\n    if (!params.id) {\n      // Handle bad url\n      //@ts-ignore\n      this.setState({ validSearch: false });\n    } else {\n      //Substitute with ID\n      let newState = JSON.parse(relationships[id]);\n      this.setState({\n        id: newState.id,\n        relationships: newState.relationships,\n        members: newState.members,\n        name: newState.name,\n        type: newState.type,\n        validSearch: newState.validSearch,\n        alternativeName: newState.alternativeName,\n        unusual: newState.unusual\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    const params = queryString.parse(this.props.location.search.slice(1));\n    const id = params.id as string;\n    if (!params.id) {\n      // Handle bad url\n      //@ts-ignore\n      this.setState({ validSearch: false });\n    } else if (this.state.id !== id) {\n      //Substitute with ID\n      let newState = JSON.parse(relationships[id]);\n      this.setState({\n        id: newState.id,\n        relationships: newState.relationships,\n        members: newState.members,\n        name: newState.name,\n        type: newState.type,\n        validSearch: newState.validSearch,\n        alternativeName: newState.alternativeName,\n        unusual: newState.unusual\n      });\n    }\n  }\n\n  /*************/\n  /* RENDERING */\n  /*************/\n\n  render() {\n    return (\n      <React.Fragment>\n        <div\n          className={this.state.validSearch ? \"no-display\" : \"\"}\n          style={{ textAlign: \"center\", padding: \"3rem\" }}\n        >\n          No profiles have been selected. Try using the Search function.\n        </div>\n        <div className={this.state.validSearch ? \"\" : \"no-display\"}>\n          <div\n            style={{\n              margin: \"1rem 6rem 3rem 6rem\",\n              padding: \"3rem\",\n              display: \"flow-root\",\n              border: \"solid 1px black\"\n            }}\n          >\n            <div style={{ textAlign: \"center\" }}>\n              {/* getEntityType(this.state.id)*/}\n            </div>\n            <div id=\"datacard-heading\">{this.state.name}</div>\n            <div id=\"datacard-othernames\">\n              {getAlternativeNames(this.state.id)}\n            </div>\n            <div id=\"datacard-mantoID\">MANTO ID: {this.state.id}</div>\n            <div\n              id=\"datacard-othernames\"\n              className={getGender(this.state.id) === \"\" ? \"no-display\" : \"\"}\n            >\n              Gender: {getGender(this.state.id)}\n            </div>\n            <p></p>\n            {/* If no data is available for the subject */}\n            <div\n              className={\n                checkNoRelations(this.state.relationships) ? \"\" : \"no-display\"\n              }\n            ></div>\n            {/* If current entity is an alternative name for an existing entity */}\n            <div>{this.getAlternativePage()}</div>\n            {/* If data is available for the subject */}\n            {this.state.relationships[\"MOTHERS\"].length +\n              this.state.relationships[\"FATHERS\"].length >\n            0 ? (\n              <div>{this.getGrandparentDataPoints()}</div>\n            ) : (\n              \"\"\n            )}\n            {entities[this.state.id][\"Type of entity\"] ===\n            \"Collective (genealogical)\"\n              ? this.getCollectiveSubheading(this.state.id)\n              : Object.keys(this.state.relationships).map(key => {\n                  return <div key={key}>{this.getDataPoints(key)}</div>;\n                })}\n            <div></div>\n            {this.state.members.super.length !== 0 ? (\n              <div>{this.getDataPoints(\"PART OF\")}</div>\n            ) : (\n              \"\"\n            )}\n            <div>{this.getCollectiveMembers()}</div>\n          </div>\n        </div>\n        <div\n          className={\n            entities[this.state.id][\"Type of entity\"] === \"Agent\"\n              ? \"\"\n              : \"no-display\"\n          }\n        >\n          {/* Entity Graph */}\n          <EntityGraph\n            relationshipClicked={this.handleNameClicked}\n            id={this.state.id}\n          />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default DataCards;\n","import React from \"react\";\nimport \"./App.css\";\nimport \"./Modal.scss\";\nimport Header from \"./Header\";\nimport Search from \"./Search\";\nimport DataCards from \"./DataCards\";\nimport ReactGA from \"react-ga\";\n\nimport {\n  HashRouter as Router,\n  Route,\n  Link,\n  Switch,\n  Redirect\n} from \"react-router-dom\";\n\nclass App extends React.Component<{}, { subjectID: string; show: boolean }> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      subjectID: \"\",\n      show: false\n    };\n  }\n\n  changeEntity(ID: string) {\n    this.setState({ subjectID: ID });\n  }\n\n  toggleModalState() {\n    if (this.state.show) {\n      this.setState({ show: false });\n    } else {\n      this.setState({\n        show: true\n      });\n    }\n  }\n\n  initializeReactGA() {\n    ReactGA.initialize(\"UA-151993194-1\");\n    ReactGA.pageview(\"/homepage\");\n  }\n\n  render() {\n    return (\n      <div className=\"homepageBackground\">\n        {/* Modal instructions popup */}\n        <div\n          style={{ margin: \"2rem 0 0 1rem\" }}\n          onClick={() => this.toggleModalState()}\n        >\n          <img\n            src={require(\"./images/help.png\")}\n            alt=\"How to use\"\n            className=\"help-icon\"\n          ></img>\n        </div>\n        <div className={this.state.show ? \"modal-body\" : \"no-display\"}>\n          <div>Testing me</div>\n          <div>\n            <button onClick={() => this.toggleModalState()}>Close</button>\n          </div>\n        </div>\n\n        {/* Router links */}\n        <Router>\n          <div style={{ paddingTop: \"4rem\", textAlign: \"center\" }}>\n            <Link to=\"/\">\n              <Header></Header>\n            </Link>\n          </div>\n\n          <Search></Search>\n          {/* <div style={{ marginLeft: \"3rem\" }}>\n            How to use the search tool:\n            <ol>\n              <li>Type the name of the entity requested in the field. </li>\n              <li>Click the entity that matches the request</li>\n              <li>\n                Press enter or click the arrow on the right of the search bar\n              </li>\n            </ol>\n            For information on how to use the data cards themselves, see this\n            page\n          </div> */}\n          <Switch>\n            {/* <Route exact path=\"/\" component={Home} /> */}\n            <Route path=\"/search\" component={Search} />\n            <Route path=\"/datacards\" component={DataCards} />\n            <Route component={() => <Redirect to=\"/\" />} />\n          </Switch>\n          <div style={{ textAlign: \"center\" }}></div>\n        </Router>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/arrow.1cd80763.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.1740fffd.svg\";"],"sourceRoot":""}